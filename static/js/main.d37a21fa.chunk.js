(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{226:function(e,t,n){},248:function(e,t,n){},258:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},308:function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n(59),s=n.n(r),i=(n(226),n(8)),o=n(16),l=n.n(o),d=n(78),u=n(204),j=n(14),b=n(326),p=n(330),O=n(321),h=n(20),m=n(12),g=n(11),x=n(320),f=n(332),v=n(331),y=n(71),C=["image"],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.length>0?e.reduce((function(e,t){return t.weight?e+t.price*(t.weight/1e3):e+t.price}),0):0},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(n.image,Object(y.a)(n,C));e([].concat(Object(h.a)(t),[a]))},w=function(){var e=new Date;return"samedi"!==e.toLocaleString("fr-FR",{weekday:"long"})?new Date(e.setDate(e.getDate()+1)).toISOString().split("T")[0]:new Date(e.setDate(e.getDate()+2)).toISOString().split("T")[0]},P="https://inde-piuma.herokuapp.com",I="piuma",A=(n(248),n(0)),N=function(e){var t=e.cart,n=e.setCart,a=e.order,r=e.setOrder,s=e.setOpenPaymentModal,i=t.reduce((function(e,t){var n=t._id;return e[n]=(e[n]||0)+1,e}),{}),o=Object.keys(i).map((function(e){return{id:e,count:i[e]}}));Object(c.useEffect)((function(){r(Object(h.a)(t))}),[t]);return Object(A.jsxs)(x.a,{className:"cart",children:[Object(A.jsx)(f.a,{className:"categories-header",style:{color:"white"},as:"h2",children:Object(A.jsx)("span",{style:{textDecoration:"underline"},children:"Votre Panier"})}),Object(A.jsx)("div",{className:"cart-pickupdate",children:Object(A.jsxs)("p",{children:["Votre commande sera pr\xe9te pour le ",function(){var e=new Date(w()),t=e.toLocaleString("fr-FR",{weekday:"long"}),n=e.getDate();return Object(A.jsxs)("span",{className:"day",children:[t," ",n," \xe0 ","11h"]})}()]})}),Object(A.jsx)(O.a,{}),Object(A.jsxs)("div",{className:"cart-description",children:[Object(A.jsxs)("div",{className:"cart-header",children:[Object(A.jsx)("div",{className:"cart-total",children:Object(A.jsxs)("span",{children:["Total: ",k(t).toFixed(2)," ",Object(A.jsx)("small",{children:"\u20ac"})]})}),Object(A.jsx)(v.a,{type:"button",color:"blue",size:"large",disabled:"0.00"===k(t).toFixed(2)||t.some((function(e){return"au kilo"===e.region.toLowerCase()&&!e.weight})),onClick:function(){return s(!0)},children:"Commander"})]}),o.map((function(e){var c,s,i=(c=t,s=e.id,c.find((function(e){return e._id===s}))),o=i.name,l=i._id,d=i.price,u=i.description,j=i.region,b=i.weight,p=i.infos;return Object(A.jsxs)("div",{className:"cart-product",children:[Object(A.jsx)("div",{className:"cart-product-title",children:o}),Object(A.jsx)("div",{className:"cart-product-amount",children:Object(A.jsxs)("span",{children:[Object(A.jsx)(v.a,{icon:!0,circular:!0,size:"mini",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=t.findIndex((function(e){return e._id===n})),c=Object(h.a)(t);c.splice(a,1),e(Object(h.a)(c))}(n,t,l)},children:Object(A.jsx)(g.a,{size:"2x",color:"red",icon:m.o})}),Object(A.jsxs)("span",{className:"counter",children:["Quantit\xe9 : ",e.count]}),Object(A.jsx)(v.a,{icon:!0,circular:!0,size:"mini",onClick:function(){return S(n,t,i)},children:Object(A.jsx)(g.a,{size:"2x",color:"green",icon:m.r})})]})}),u&&Object(A.jsxs)("div",{className:"cart-product-description",children:[Object(A.jsx)("p",{children:u}),Object(A.jsx)("textarea",{style:{width:"100%"},cols:"5",rows:"3",name:e.id,value:p,onChange:function(e){return function(e){var t=a.find((function(t){return t._id===e.target.name}));t.infos=e.target.value;var n=a.findIndex((function(t){return t._id===e.target.name})),c=Object(h.a)(a);c[n]=t,r(Object(h.a)(c))}(e)},placeholder:"Infos compl\xe9mentaires Exemple: Cannistrellis sucr\xe9s noisette, ribella misticu..."})]}),Object(A.jsx)("div",{className:"cart-product-unitprice",children:Object(A.jsxs)("p",{children:["Prix unitaire: ",d," ",Object(A.jsx)("small",{children:"\u20ac"})," / ",j]})}),Object(A.jsx)("div",{className:"cart-product-subtotal",children:"au kilo"===j.toLowerCase()?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("label",{children:"Poids d\xe9sir\xe9 "}),Object(A.jsxs)("select",{required:!0,name:e.id,value:b,onChange:function(e){return function(e){var t=a.find((function(t){return t._id===e.target.name}));t.weight=Number(e.target.value);var n=a.findIndex((function(t){return t._id===e.target.name})),c=Object(h.a)(a);c[n]=t,r(Object(h.a)(c))}(e)},children:[Object(A.jsx)("option",{value:"",children:"Selectionnez un poids"}),Object(A.jsx)("option",{value:300,children:"300"}),Object(A.jsx)("option",{value:350,children:"350"}),Object(A.jsx)("option",{value:400,children:"400"}),Object(A.jsx)("option",{value:450,children:"450"}),Object(A.jsx)("option",{value:500,children:"500"}),Object(A.jsx)("option",{value:550,children:"550"}),Object(A.jsx)("option",{value:600,children:"600"}),Object(A.jsx)("option",{value:650,children:"650"}),Object(A.jsx)("option",{value:700,children:"700"}),Object(A.jsx)("option",{value:750,children:"750"}),Object(A.jsx)("option",{value:800,children:"800"}),Object(A.jsx)("option",{value:850,children:"850"}),Object(A.jsx)("option",{value:900,children:"900"}),Object(A.jsx)("option",{value:950,children:"950"}),Object(A.jsx)("option",{value:1e3,children:"1000"})]}),"grammes",b>0&&Object(A.jsxs)("p",{children:["Sous-Total :",(d*(b/1e3)*e.count).toFixed(2),Object(A.jsx)("small",{children:"\u20ac"})]})]}):Object(A.jsxs)("p",{children:["Sous-Total :",(d*e.count).toFixed(2),Object(A.jsx)("small",{children:"\u20ac"})]})})]})})),Object(A.jsx)("div",{}),Object(A.jsxs)("div",{className:"cart-header",children:[Object(A.jsx)("div",{className:"cart-total",children:Object(A.jsxs)("span",{children:["Total: ",k(t).toFixed(2)," ",Object(A.jsx)("small",{children:"\u20ac"})]})}),Object(A.jsx)(v.a,{type:"button",color:"blue",size:"large",disabled:"0.00"===k(t).toFixed(2)||t.some((function(e){return"au kilo"===e.region.toLowerCase()&&!e.weight})),onClick:function(){return s(!0)},children:"Commander"})]})]})]})},z=n(9),M=function(e){var t=e.loading,n=e.visible,a=e._id,c=e.choice,r=e.showInShop,s=e.product,i=e.handleDeleteProduct,o=e.handleChangeChoice,l=e.handleChangeVisibility,d=e.handleChangeShoppable,u=e.setSelectedProduct,j=e.setOpenEditProductModal,b=e.setOpenUpdateImageModal;return Object(A.jsxs)("div",{className:"adminbuttons",children:[Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:"remove",size:"large",color:"red",onClick:function(){return i(a)}}),Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:"edit",size:"large",color:"purple",onClick:function(){u(s),j(!0)}}),Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:"shopping basket",size:"large",color:r?"orange":"grey",onClick:function(){return d(s)}}),Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:n?"hide":"unhide",size:"large",onClick:function(){return l(s)}}),Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:"heart",size:"large",color:c?"red":"grey",onClick:function(){return o(s)}}),Object(A.jsx)(v.a,{disabled:t,loading:t,circular:!0,icon:"image",size:"large",color:"yellow",onClick:function(){u(s),b(!0)}})]})},E=n(115),F=n(164),L=(n(258),function(e){var t=e.product,n=e._id,a=e.name,c=e.type,r=e.region,s=e.description,i=e.price,o=e.category,l=e.choice,d=e.visible,u=e.image,b=e.showInShop,p=e.user,O=e.setOpenImageModal,h=e.setSelectedProduct,x=e.setCart,y=e.cart,C=Object(j.f)(),k=navigator.language||navigator.userLanguage,w={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,n){var a=JSON.parse(localStorage.getItem("translations"))||Object(E.a)({},t,{});a[t]=Object(z.a)(Object(z.a)({},a[t]),{},Object(E.a)({},e,n)),localStorage.setItem("translations",JSON.stringify(a))}};return Object(A.jsxs)("div",{id:n,className:"productitem",style:{display:d||"isAdmin"===p.role?"":"none",border:decodeURI(C.location.hash.replace("#",""))===n?"8px solid darkred":""},children:[Object(A.jsxs)("div",{className:"productitem-header",children:[Object(A.jsxs)(f.a,{as:"h3",style:"cave"===c&&"rouges"===o?{color:"darkred"}:"cave"===c&&"roses"===o?{color:"#fec5d9"}:"cave"===c&&"blancs"===o?{color:"#f1f285"}:{color:""},children:[d?"":"Cach\xe9 : ",a,u&&Object(A.jsx)(g.a,{style:{color:"white",marginLeft:8},icon:m.u,onClick:function(){h(t),O(!0)}}),l&&Object(A.jsx)(g.a,{className:"bosschoice alvp__icon",icon:m.m,style:{"--fa-primary-color":"darkred","--fa-secondary-color":"transparent"},size:"2x"})]}),b&&Object(A.jsxs)(v.a,{className:"addtocart",icon:!0,circular:!0,color:"orange",onClick:function(){return S(x,y,t)},children:[Object(A.jsx)(g.a,{size:"2x",icon:m.d}),Object(A.jsx)("span",{className:"itemcounter",children:y.filter((function(e){return e._id===n})).length})]}),"cave"===c&&"verre de vin"!==a.toLowerCase()?Object(A.jsxs)("span",{className:"price",children:[i.toFixed(2)-7,Object(A.jsx)("small",{children:"\u20ac"})]}):Object(A.jsxs)("span",{className:"price",children:[i.toFixed(2),Object(A.jsx)("small",{children:"\u20ac"})]})]}),r&&Object(A.jsxs)("div",{className:"region-wrapper",children:[Object(A.jsx)("div",{className:"region",children:r}),"cave"===c&&"verre de vin"!==a.toLowerCase()&&Object(A.jsxs)("span",{className:"region",children:["Sur place : ".concat(i.toFixed(2)),Object(A.jsx)("small",{children:"\u20ac"})]})]}),s&&Object(A.jsx)(F.b,{cacheProvider:w,from:"fr",to:k.substr(0,2),googleApiKey:"AIzaSyAZaWwVgn5z9gNPy0cbweEVGUeWwva5GGM",children:Object(A.jsx)("p",{className:"description",children:Object(A.jsx)(F.a,{children:s})})})]})}),T=n(324),_=n(323),D=function(e){var t=e.dropdownValue,n=e.subCategories,a=e.activeMenu,c=e.setActiveMenu,r=e.setDropdownValue,s=e.products;return Object(A.jsx)(T.a,{compact:!0,borderless:!0,icon:"labeled",className:"categories-menu",style:{position:"relative"},children:n.map((function(e){return Object(A.jsx)(A.Fragment,{children:e.subCat?Object(A.jsxs)("div",{style:{position:"relative"},children:[Object(A.jsx)("sup",{style:{position:"absolute",top:9,right:3,zIndex:10},children:Object(A.jsx)("span",{className:"badge",children:s&&s.filter((function(t){return t.category===e.slug&&t.visible})).length})}),Object(A.jsx)(_.a,{className:a===e.slug?"categories-dropdown active":"categories-dropdown",item:!0,icon:e.icon,text:e.name,onClick:function(){return c(e.slug)},children:Object(A.jsx)(_.a.Menu,{direction:"blancs"===a&&"blancs"===e.slug&&"left",children:e.subCat.map((function(e){return Object(A.jsx)(_.a.Item,{active:t===e.slug,onClick:function(t){return r(e.slug)},children:Object(A.jsxs)("span",{className:"dropdown-menuitem",children:[e.name,Object(A.jsx)("span",{className:"badge",children:s&&s.filter((function(t){return t.subCategory===e.slug&&t.visible})).length})]})},e.slug)}))})},e.slug)]}):Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(T.a.Item,{style:{position:"relative"},className:"menu-items",active:a===e.slug,onClick:function(){return c(e.slug)},children:[Object(A.jsx)(T.a.Header,{children:e.icon}),e.name,Object(A.jsx)("sup",{style:{position:"absolute",top:9,right:3},children:Object(A.jsx)("span",{className:"badge top-menu",children:s&&s.filter((function(t){return t.category===e.slug&&t.visible})).length})})]},e.slug)})})}))})},R=[{name:"Aujourd'hui",slug:"aujourd'hui",icon:Object(A.jsx)(g.a,{size:"4x",icon:m.y,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})},{name:"L'\xc9picerie",slug:"epicerie",icon:Object(A.jsx)(g.a,{size:"4x",icon:m.a,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Les Sal\xe9s",slug:"sal\xe9s-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.h,style:{"--fa-primary-color":"darkred"}})},{name:"Les Petits Pots",slug:"pots-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.k,style:{"--fa-primary-color":"darkred"}})},{name:"Les Huiles et Vinaigres",slug:"huile-et-vinaigres-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.n,style:{"--fa-primary-color":"darkred"}})},{name:"Les Assaisonements",slug:"assaisonements-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.s,style:{"--fa-primary-color":"darkred"}})},{name:"Les Terrines",slug:"terrines-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.q,style:{"--fa-primary-color":"darkred"}})},{name:"Les Charcuteries",slug:"charcuteries-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.t,style:{"--fa-primary-color":"darkred"}})},{name:"Les Fromages",slug:"fromages-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.e,style:{"--fa-primary-color":"darkred"}})},{name:"Les Douceurs",slug:"douceurs-p",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.f,style:{"--fa-primary-color":"darkred"}})}]},{name:"Assiettes \xe0 composer",slug:"spuntinu",details:"\xc0 partir de 18h",icon:Object(A.jsx)(g.a,{size:"4x",icon:m.q,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Les Sal\xe9s",slug:"sal\xe9s",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.h,style:{"--fa-primary-color":"darkred"}})},{name:"Les Petits Pots",slug:"pots",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.k,style:{"--fa-primary-color":"darkred"}})},{name:"Les Terrines",slug:"terrines",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.q,style:{"--fa-primary-color":"darkred"}})},{name:"Les Charcuteries",slug:"charcuteries",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.t,style:{"--fa-primary-color":"darkred"}})},{name:"Les Fromages",slug:"fromages",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.e,style:{"--fa-primary-color":"darkred"}})},{name:"Les Douceurs",slug:"douceurs",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.f,style:{"--fa-primary-color":"darkred"}})}]},{name:"La Cave",slug:"cave",icon:Object(A.jsx)(g.a,{icon:m.A,size:"4x",style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Vins Rouges",slug:"rouges",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"darkred"}})},{name:"Vins Ros\xe9s",slug:"roses",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"#fec5d9"}})},{name:"Vins Blancs",slug:"blancs",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"#f1f285"}})},{name:"Les Champagnes",slug:"champagnes",icon:Object(A.jsx)(g.a,{size:"3x",icon:m.i,style:{"--fa-primary-color":"white"}})}]},{name:"Les Bi\xe8res",slug:"bieres",icon:Object(A.jsx)(g.a,{size:"4x",icon:m.c,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})},{name:"Les Softs",slug:"softs",icon:Object(A.jsx)(g.a,{size:"4x",icon:m.j,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})}],V=(n(264),["image"]),B=["image"],H=["image"],U=function(e){var t,n,a=e.setFilteredProducts,r=e.selectedCategory,s=e.dropdownValue,o=e.activeMenu,d=e.setActiveMenu,u=e.setDropdownValue,b=e.products,p=e.filteredProducts,h=e.user,C=e.setOpenAddProductModal,k=e.setProducts,S=e.setOpenLoginModal,w=e.setSelectedProduct,N=e.setOpenEditProductModal,E=e.setOpenImageModal,F=e.setOpenUpdateImageModal,T=e.setCart,_=e.cart,U=(Object(j.g)(),r.name),q=r.subCategories,J=r.details,G=Object(c.useState)(!1),W=Object(i.a)(G,2),Y=W[0],K=W[1],Q=("vins"===r.slug&&((null===r||void 0===r||null===(t=r.subCategories[0])||void 0===t?void 0:t.subCat.find((function(e){e.name;return e.slug===s})))||(null===r||void 0===r||null===(n=r.subCategories[2])||void 0===n||n.subCat.find((function(e){e.name;return e.slug===s})))),Object(c.useRef)());Object(c.useEffect)((function(){Q.current=s}));Q.current;Object(c.useEffect)((function(){a(b.filter((function(e){return e.type===r.slug})))}),[b]),Object(c.useEffect)((function(){u(""),o&&a(null===b||void 0===b?void 0:b.filter((function(e){return e.category===o})))}),[o]),Object(c.useEffect)((function(){s&&(u(s),a(null===b||void 0===b?void 0:b.filter((function(e){return e.subCategory===s}))))}),[s]);var X=localStorage.getItem("token-".concat(I)),Z=function(e){X?(K(!0),l()({method:"delete",url:"".concat(P,"/api/products/deleteProduct"),data:{productId:e},headers:{Authorization:"Bearer "+X}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}))):S(!0)},$=function(e){e.image;var t=Object(y.a)(e,V);t.visible=!e.visible,X?(K(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+X}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}))):S(!0)},ee=function(e){e.image;var t=Object(y.a)(e,B);t.choice=!e.choice,X?(K(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+X}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}))):S(!0)},te=function(e){e.image;var t=Object(y.a)(e,H);t.showInShop=!e.showInShop,X?(K(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+X}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}))):S(!0)};return Object(A.jsxs)(x.a,{className:"categories",children:[h&&"isAdmin"===h.role&&Object(A.jsx)("div",{children:Object(A.jsx)(v.a,{color:"green",circular:!0,size:"medium",onClick:function(){return C(!0)},children:Object(A.jsx)(g.a,{icon:m.r,size:"2x"})})}),Object(A.jsxs)(f.a,{className:"categories-header",style:{color:"white"},as:"h2",children:[Object(A.jsx)("span",{style:{textDecoration:"underline"},children:U}),J&&Object(A.jsx)("p",{style:{color:"black",fontSize:"0.5em",textDecoration:""},children:J})]}),o&&Object(A.jsx)(f.a,{className:"categories-header",as:"h3",style:"rouges"===o?{color:"darkred"}:"roses"===o?{color:"#fec5d9"}:"blancs"===o?{color:"#f1f285"}:{color:"white"},children:R.filter((function(e){var t;return null===e||void 0===e||null===(t=e.subCategories)||void 0===t?void 0:t.find((function(e){return e.slug===o}))}))[0].subCategories.find((function(e){return e.slug===o})).name}),Object(A.jsx)(O.a,{hidden:!0}),q&&Object(A.jsx)(D,{products:b,dropdownValue:s,subCategories:q,activeMenu:o,setActiveMenu:d,setDropdownValue:u}),Object(A.jsx)(O.a,{hidden:!0}),Object(A.jsx)("div",{className:"products",children:null===p||void 0===p?void 0:p.sort((function(e,t){return e.price-t.price})).sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:t.name.toLowerCase()>e.name.toLowerCase()?-1:0})).sort((function(e,t){return t.choice-e.choice})).map((function(e){return Object(A.jsxs)(A.Fragment,{children:[h&&"isAdmin"===h.role&&Object(A.jsx)(M,Object(z.a)(Object(z.a)({loading:Y},e),{},{product:e,handleDeleteProduct:Z,handleChangeVisibility:$,handleChangeChoice:ee,handleChangeShoppable:te,setSelectedProduct:w,setOpenEditProductModal:N,setOpenUpdateImageModal:F})),Object(A.jsx)(L,Object(z.a)(Object(z.a)({product:e},e),{},{user:h,setOpenImageModal:E,setSelectedProduct:w,setCart:T,cart:_}),e._id)]})}))}),Object(A.jsx)(O.a,{hidden:!0}),q&&p.length>1&&Object(A.jsx)(D,{products:b,dropdownValue:s,subCategories:q,activeMenu:o,setActiveMenu:d,setDropdownValue:u})]})},q=(n(265),n(266),n(209)),J=n(210),G=function(e){var t,n,a,r,s=e.user,o=e.event,d=e.setEvent,u=e.setOpenAddEventModal,j=e.setSelectedCategory,b=e.setActiveMenu,p=e.products,O=e.setOpenLoginModal,h=Object(c.useState)(!1),y=Object(i.a)(h,2),C=y[0],k=y[1],S=localStorage.getItem("token-".concat(I)),w=Object(c.useState)(0),N=Object(i.a)(w,2),z=N[0],M=N[1],E=localStorage.getItem("".concat(I,"-event"));Object(c.useEffect)((function(){M(o.like),E&&E!==o._id&&o._id&&localStorage.removeItem("".concat(I,"-event"))}),[o]);var F=function(){return function(e){for(var t,n=e.length;0!==n;){t=Math.floor(Math.random()*n),n--;var a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e.slice(0,6)}(null===p||void 0===p?void 0:p.filter((function(e){return e.image})))},L=function(e){return R.find((function(t){return t.slug===e}))},T=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)},_="data:".concat(null===(t=o.image)||void 0===t?void 0:t.contentType,";base64,"),D=T(null===(n=o.image)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data);return Object(A.jsxs)(x.a,{className:"home",children:[s&&"isAdmin"===s.role&&Object(A.jsxs)("div",{className:"home-addbutton",children:[o&&0===Object.keys(o).length&&Object(A.jsx)(v.a,{loading:C,disabled:C,color:"green",circular:!0,size:"medium",onClick:function(){return u(!0)},children:Object(A.jsx)(g.a,{icon:m.r,size:"2x"})}),o&&Object.keys(o).length>0&&Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(v.a,{loading:C,disabled:C,color:"red",circular:!0,size:"medium",onClick:function(){return e=o._id,void(S?(k(!0),l()({method:"delete",url:"".concat(P,"/api/events/deleteEvent"),data:{eventId:e},headers:{Authorization:"Bearer "+S}}).then((function(e){return d({})})).catch((function(e){return console.log(e)})).finally((function(){return k(!1)}))):O(!0));var e},children:Object(A.jsx)(g.a,{icon:m.x,size:"2x"})})})]}),o&&Object.keys(o).length>0&&Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(f.a,{className:"home-header",as:"h1",children:o.name}),Object(A.jsxs)(x.a,{text:!0,className:"home-presentation",children:[o.image&&Object(A.jsx)("div",{children:Object(A.jsx)("img",{style:{width:"100%"},src:_+D,alt:o.name})}),o.date&&Object(A.jsx)("p",{children:"Le :\n                ".concat(new Date(o.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}))}),Object(A.jsx)("p",{children:o.description}),Object(A.jsxs)("div",{className:"home-like-button",children:[Object(A.jsx)(v.a,{disabled:!!E,icon:!0,circular:!0,color:"facebook",onClick:function(){E||(localStorage.setItem("".concat(I,"-event"),o._id),l()({method:"post",url:"".concat(P,"/api/events/updateLikes"),data:{_id:o._id}}),M(z+1))},children:Object(A.jsx)(g.a,{size:"1x",icon:m.w,style:{"--fa-secondary-color":"white","--fa-secondary-opacity":1}})}),Object(A.jsx)("span",{style:{background:"transparent",color:"white",borderRadius:50,display:"inline-block",padding:"5px 10px"},children:z})]})]})]}),o&&0===Object.keys(o).length&&Object(A.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:p&&((null===(r=F())||void 0===r?void 0:r.length)>0?Object(A.jsx)(q.Carousel,{showArrows:!0,showThumbs:!1,infiniteLoop:!0,children:F().map((function(e){var t,n,a;return Object(A.jsxs)("div",{children:[e.choice&&Object(A.jsx)(g.a,{className:"choisen alvp__icon",icon:m.m,style:{"--fa-primary-color":"darkred","--fa-secondary-color":"transparent"},size:"2x"}),Object(A.jsx)("img",{src:"data:".concat(null===e||void 0===e||null===(t=e.image)||void 0===t?void 0:t.contentType,";base64,")+T(null===(n=e.image)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.data),alt:e.name}),Object(A.jsxs)(J.a,{smooth:!0,to:"/categories/".concat(L(e.type).slug,"#").concat(e._id),onClick:function(){j(L(e.type)),b(e.category)},children:[Object(A.jsx)("p",{className:"legend",children:e.name}),Object(A.jsxs)("p",{className:"legend price",children:[e.price," ",Object(A.jsx)("small",{children:"\u20ac"})]})]})]})}))}):Object(A.jsx)("img",{height:"280px",src:"./assets/images/logo.png",alt:"logo RDR"}))})]})},W=n(22),Y=n.n(W),K=n(39),Q=n(327),X=n(55),Z=n(325),$=n(92),ee=n.n($),te=function(e){var t=e.setEvent,n=e.setAppMessage,a=e.setOpenLoginModal,r=e.openAddEventModal,s=e.setOpenAddEventModal,o=Object(c.useState)({name:"",description:"",date:"",like:0,image:""}),d=Object(i.a)(o,2),u=d[0],j=d[1],b=new Date,p=Object(c.useState)(!1),O=Object(i.a)(p,2),h=O[0],m=O[1],g=function(e){var t={};t[e.target.name]=e.target.value,j(Object(z.a)(Object(z.a)({},u),t))},x=function(){var e=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.a.imageFileResizer(t.target.files[0],500,500,"JPEG",100,0,(function(e){j(Object(z.a)(Object(z.a)({},u),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(c.useRef)(null),C=localStorage.getItem("token-".concat(I));return Object(A.jsxs)(Q.a,{closeIcon:!0,onClose:function(){return s(!1)},onOpen:function(){return s(!0)},open:r,size:"small",children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{name:"add"}),"Ajouter un Evenement"]}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault();var c=new FormData;c.append("name",u.name),c.append("description",u.description||""),c.append("date",u.date||""),c.append("like",0),c.append("image",u.image||""),C?(m(!0),l()({method:"post",url:"".concat(P,"/api/events/createEvent"),data:c,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&(t(e.data.data),j({name:"",description:"",date:"",like:0,image:""})),n({success:200===e.data.status,message:e.data.message})})).then((function(){s(!1)})).catch((function(e){return n({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){m(!1)}))):a(!0)},id:"addEvent-form",children:[Object(A.jsxs)(Z.a.Field,{required:!0,error:!u.name,children:[Object(A.jsx)("label",{children:"Nom de l'evenement"}),Object(A.jsx)("input",{value:u.name,name:"name",type:"text",onChange:function(e){return g(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Description"}),Object(A.jsx)("textarea",{value:u.description,name:"description",rows:"5",cols:"33",onChange:function(e){return g(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Date de l'evenement"}),Object(A.jsx)("input",{value:u.date,name:"date",type:"date",min:b.toISOString().split("T")[0],onChange:function(e){return g(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("input",{ref:y,accept:"image/*",id:"addEventImage",files:u.image,type:"file",hidden:!0,onChange:function(e){return x(e)}}),Object(A.jsx)(v.a,{disabled:h,loading:h,type:"button",onClick:function(){return y.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(A.jsxs)(Q.a.Actions,{children:[Object(A.jsxs)(v.a,{disabled:h||!u.name,loading:h,color:"green",type:"submit",form:"addEvent-form",inverted:!0,children:[Object(A.jsx)(X.a,{name:"add"})," Ajouter"]}),Object(A.jsxs)(v.a,{disabled:h,loading:h,color:"red",type:"submit",form:"addEvent-form",inverted:!0,onClick:function(){return s(!1)},children:[Object(A.jsx)(X.a,{name:"remove"})," Annuler"]})]})]})},ne=n(322),ae=function(e){var t=e.selectedCategory,n=e.setAppMessage,a=e.openAddProductModal,r=e.setOpenAddProductModal,s=e.setOpenLoginModal,o=e.setProducts,d=Object(c.useState)({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:"",showInShop:!1}),u=Object(i.a)(d,2),j=u[0],b=u[1],p=Object(c.useState)(!1),O=Object(i.a)(p,2),h=O[0],m=O[1],g=Object(c.useRef)(null);Object(c.useEffect)((function(){b(Object(z.a)(Object(z.a)({},j),{},{type:t.slug}))}),[t]);var x=function(e){var t={};t[e.target.name]=e.target.value,b(Object(z.a)(Object(z.a)({},j),t))},y=function(){var e=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ee.a.imageFileResizer(t.target.files[0],400,400,"JPEG",100,0,(function(e){b(Object(z.a)(Object(z.a)({},j),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=localStorage.getItem("token-".concat(I));return Object(A.jsxs)(Q.a,{onClose:function(){return r(!1)},onOpen:function(){return r(!0)},open:a,size:"small",children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{name:"add"}),"Ajouter un Produit"]}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",j.name),t.append("description",j.description||""),t.append("region",j.region||""),t.append("price",j.price),t.append("type",j.type),t.append("category",j.category||""),t.append("subCategory",j.subCategory||""),t.append("choice",j.choice||!1),t.append("visible",j.visible||!0),t.append("image",j.image||""),t.append("showInShop",j.showInShop||!1),C?(m(!0),l()({method:"post",url:"".concat(P,"/api/products/createProduct"),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&(o(e.data.data),b({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:"",showInShop:!1})),n({success:200===e.data.status,message:e.data.message})})).then((function(){r(!1)})).catch((function(e){return n({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){m(!1)}))):s(!0)},id:"addProduct-form",children:[Object(A.jsxs)(Z.a.Field,{required:!0,error:!j.name,children:[Object(A.jsx)("label",{children:"Nom du Produit"}),Object(A.jsx)("input",{value:j.name,name:"name",type:"text",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Description"}),Object(A.jsx)("textarea",{value:j.description,name:"description",rows:"5",cols:"33",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"R\xe9gion"}),Object(A.jsx)("input",{value:j.region,name:"region",type:"text",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,error:!j.price,children:[Object(A.jsx)("label",{children:"Prix"}),Object(A.jsx)("input",{min:1,step:.1,value:j.price,name:"price",type:"number",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,error:!j.type,children:[Object(A.jsx)("label",{children:"Type de Produit"}),R.map((function(e){return e.slug&&Object(A.jsx)(ne.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.type;t=e,b(Object(z.a)(Object(z.a)({},j),{},{type:t}))}(e.slug)},checked:j.type===e.slug},e.slug)}))]}),("cave"===j.type||"spuntinu"===j.type||"epicerie"===j.type)&&Object(A.jsxs)(Z.a.Field,{required:!0,error:!j.category,children:[Object(A.jsx)("label",{children:"Categorie de Produit"}),R.map((function(e){var t;return e.slug===j.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(A.jsx)(ne.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.category;t=e,b(Object(z.a)(Object(z.a)({},j),{},{category:t}))}(e.slug)},checked:j.category===e.slug},e.slug)})))}))]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Choix du Patron ?"}),Object(A.jsx)(ne.a,{toggle:!0,checked:j.choice,onChange:function(){return b(Object(z.a)(Object(z.a)({},j),{},{choice:!j.choice}))}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Shoppable ?"}),Object(A.jsx)(ne.a,{toggle:!0,checked:j.showInShop,onChange:function(){return b(Object(z.a)(Object(z.a)({},j),{},{showInShop:!j.showInShop}))}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("input",{ref:g,accept:"image/*",id:"addImage",files:j.image,type:"file",hidden:!0,onChange:function(e){return y(e)}}),Object(A.jsx)(v.a,{disabled:h,loading:h,type:"button",onClick:function(){return g.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(A.jsxs)(Q.a.Actions,{children:[Object(A.jsxs)(v.a,{disabled:h||!j.name||!j.price||!j.type||("cave"===j.type||"spuntinu"===j.type||"epicerie"===j.type)&&!j.category,loading:h,color:"green",type:"submit",form:"addProduct-form",inverted:!0,children:[Object(A.jsx)(X.a,{name:"add"})," Ajouter"]}),Object(A.jsxs)(v.a,{disabled:h,loading:h,color:"red",type:"submit",form:"addProduct-form",inverted:!0,onClick:function(){return r(!1)},children:[Object(A.jsx)(X.a,{name:"remove"})," Annuler"]})]})]})},ce=["image"],re=function(e){var t=e.product,n=e.setOpenEditProductModal,a=e.openEditProductModal,r=e.setOpenLoginModal,s=e.setAppMessage,o=e.setProducts,d=(t.image,Object(y.a)(t,ce)),u=Object(c.useState)({name:d.name,region:d.region,description:d.description,price:d.price,type:d.type,category:d.category,subCategory:d.subCategory,choice:d.choice,visible:d.visible,showInShop:d.showInShop}),j=Object(i.a)(u,2),b=j[0],p=j[1],O=Object(c.useState)(!1),h=Object(i.a)(O,2),m=h[0],g=h[1];Object(c.useEffect)((function(){p(Object(z.a)({},d))}),[t]);var x=function(e){var t={};t[e.target.name]=e.target.value,p(Object(z.a)(Object(z.a)({},b),t))},C=localStorage.getItem("token-".concat(I));Object(c.useEffect)((function(){"rouges"===b.category&&"blancs"===b.category||p(Object(z.a)(Object(z.a)({},b),{},{subCategory:""}))}),[b.category]);return Object(A.jsxs)(Q.a,{onClose:function(){return n(!1)},onOpen:function(){return n(!0)},open:a,size:"small",children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{name:"edit"}),"Editer ",d.name]}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault(),C?(g(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProduct"),data:{update:b,productId:d._id},headers:{Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&o(e.data.data),s({success:200===e.data.status,message:e.data.message})})).catch((function(e){s({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){g(!1),n(!1)}))):(n(!1),r(!0))},id:"editProduct-form",children:[Object(A.jsxs)(Z.a.Field,{required:!0,error:!b.name,children:[Object(A.jsx)("label",{children:"Nom du Produit"}),Object(A.jsx)("input",{value:b.name,name:"name",type:"text",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Description"}),Object(A.jsx)("textarea",{value:b.description,name:"description",rows:"5",cols:"33",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"R\xe9gion"}),Object(A.jsx)("input",{value:b.region,name:"region",type:"text",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,error:!b.price,children:[Object(A.jsx)("label",{children:"Prix"}),Object(A.jsx)("input",{min:1,step:.1,value:b.price,name:"price",type:"number",onChange:function(e){return x(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,error:!b.type,children:[Object(A.jsx)("label",{children:"Type de Produit"}),R.map((function(e){return e.slug&&Object(A.jsx)(ne.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=b.type;t=e,p(Object(z.a)(Object(z.a)({},b),{},{type:t}))}(e.slug)},checked:b.type===e.slug},e.slug)}))]}),("cave"===b.type||"spuntinu"===b.type||"epicerie"===t.type)&&Object(A.jsxs)(Z.a.Field,{required:!0,error:!b.category,children:[Object(A.jsx)("label",{children:"Categorie de Produit"}),R.map((function(e){var t;return e.slug===b.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(A.jsx)(ne.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=b.category;t=e,p(Object(z.a)(Object(z.a)({},b),{},{category:t}))}(e.slug)},checked:b.category===e.slug},e.slug)})))}))]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Choix du Patron ?"}),Object(A.jsx)(ne.a,{toggle:!0,checked:b.choice,onChange:function(){return p(Object(z.a)(Object(z.a)({},b),{},{choice:!b.choice}))}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Shoppable ?"}),Object(A.jsx)(ne.a,{toggle:!0,checked:b.showInShop,onChange:function(){return p(Object(z.a)(Object(z.a)({},b),{},{showInShop:!b.showInShop}))}})]})]})}),Object(A.jsxs)(Q.a.Actions,{children:[Object(A.jsxs)(v.a,{disabled:m||!b.name||!b.price||!b.type||("cave"===b.type||"spuntinu"===b.type||"epicerie"===t.type)&&!b.category,loading:m,color:"purple",type:"submit",form:"editProduct-form",inverted:!0,children:[Object(A.jsx)(X.a,{name:"edit"})," Editer"]}),Object(A.jsxs)(v.a,{disabled:m,loading:m,color:"red",type:"submit",form:"editProduct-form",inverted:!0,onClick:function(){return n(!1)},children:[Object(A.jsx)(X.a,{name:"remove"})," Annuler"]})]})]})},se=function(e){var t,n=e.openImageModal,a=e.setOpenImageModal,c=e.product,r=c.image,s=c.name,i="data:".concat(null===r||void 0===r?void 0:r.contentType,";base64,"),o=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data);return Object(A.jsxs)(Q.a,{closeIcon:!0,basic:!0,open:n,onClose:function(){return a(!1)},children:[Object(A.jsx)(f.a,{children:s}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsx)("img",{style:{width:"100%"},src:i+o,alt:s})})]})},ie=function(e){var t=e.setOpenLoginModal,n=e.openLoginModal,a=e.setUser,r=e.setAppMessage,s=Object(c.useState)(""),o=Object(i.a)(s,2),d=o[0],u=o[1],j=Object(c.useState)(""),b=Object(i.a)(j,2),p=b[0],O=b[1],h=Object(c.useState)(!1),m=Object(i.a)(h,2),g=m[0],x=m[1];return Object(A.jsxs)(Q.a,{onClose:function(){return t(!1)},onOpen:function(){return t(!0)},open:n,size:"small",children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{name:"user"}),"Se Connecter"]}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsxs)(Z.a,{onSubmit:function(e){e.preventDefault(),x(!0),l()({method:"post",url:"".concat(P,"/auth/login"),data:{email:d,password:p}}).then((function(e){a(e.data.user),r({success:200===e.data.status,message:e.data.message}),localStorage.setItem("token-".concat(I),e.data.token),t(!1)})).catch((function(e){r({success:!1,message:"il y a eu un probl\xe9me durant la connexion"})})).finally((function(){x(!1)}))},id:"auth-form",children:[Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"E-Mail"}),Object(A.jsx)("input",{value:d,type:"email",onChange:function(e){return u(e.target.value)}})]}),Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("label",{children:"Mot de passe"}),Object(A.jsx)("input",{type:"password",value:p,onChange:function(e){return O(e.target.value)}})]})]})}),Object(A.jsx)(Q.a.Actions,{children:Object(A.jsxs)(v.a,{color:"green",loading:g,type:"submit",form:"auth-form",disabled:0===d.length||0===p.length||g,inverted:!0,children:[Object(A.jsx)(X.a,{name:"checkmark"})," Connexion"]})})]})},oe=n(29),le=(n(273),function(e){var t=e.setOpenPaymentModal,n=e.openPaymentModal,a=e.setOrder,r=e.order,s=e.setCart,o=e.socket,u=e.tableNumber,j=Object(d.useStripe)(),b=Object(d.useElements)(),O=Object(c.useState)({name:"",email:"",tableNumber:u,tel:"",date:"",items:[],status:"",transaction:{}}),m=Object(i.a)(O,2),g=m[0],x=m[1],y=Object(c.useState)(!1),C=Object(i.a)(y,2),S=C[0],I=C[1],N=Object(c.useState)(null),M=Object(i.a)(N,2),E=M[0],F=M[1],L=Object(c.useState)(!1),T=Object(i.a)(L,2),_=T[0],D=T[1],R=Object(c.useState)(!0),V=Object(i.a)(R,2),B=V[0],H=V[1],U=Object(c.useState)(""),q=Object(i.a)(U,2),J=q[0],G=q[1];Object(c.useEffect)((function(){(I(!0),n)&&(x(Object(z.a)(Object(z.a)({},g),{},{tableNumber:u})),function(){var e=Object(K.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"".concat(P,"/api/orders/create-payment-intent"),data:{items:r}});case 2:(t=e.sent)&&200===t.data.status?(G(t.data.clientSecret),I(!1),x(Object(z.a)(Object(z.a)({},g),{},{items:Object(h.a)(r)}))):F("Il y a eu un probl\xe9me veuillez recharger la page");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),F(null))}),[n]);var W=function(e){var t={};t[e.target.name]=e.target.value,x(Object(z.a)(Object(z.a)({},g),t))},$=function(){var e=Object(K.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(t.empty),F(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(K.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I(!0),j&&b){e.next=5;break}return H(!0),e.abrupt("return");case 5:return e.next=7,j.confirmCardPayment(J,{receipt_email:g.email,payment_method:{card:b.getElement(d.CardElement),billing_details:{email:g.email,name:g.name,phone:g.tel}}});case 7:(n=e.sent).error?(F("Le paiement \xe0 \xe9chou\xe9 pour la raison suivante : ".concat(n.error.message)),I(!1)):(I(!0),g.status="PAID",g.transaction=n,g.date=w(),x(Object(z.a)({},g)),function(){var e=Object(K.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l()({method:"post",url:"".concat(P,"/api/orders/createOrder"),data:g});case 2:(t=e.sent)&&200===t.data.status?(o.emit("newOrder",t.data.order,(function(e){e&&alert(e)})),I(!1),a([]),x({}),s([])):F("Il y a eu un probl\xe9me veuillez recharger la page");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),F(null),I(!1),D(!0));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(A.jsxs)(Q.a,{onClose:function(){return t(!1)},open:n,size:"small",children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{color:E?"red":_?"green":"blue",name:E?"remove circle":_?"check":"dollar sign"}),Object(A.jsx)("span",{style:{color:E?"red":_?"green":"blue"},children:E?"Paiement \xc9chou\xe9":_?"Paiement Reussi":S?"Paiement en Cours":"Payer Votre Commande"}),Object(A.jsx)(p.a,{warning:!0,header:"ATTENTION !",content:"Les commandes sont trait\xe9es en 24h , vous pourrez recuperer votre commande d\xe9s demain !"}),Object(A.jsxs)("div",{className:_?"result-message-container":"result-message-container hidden",children:[Object(A.jsxs)("p",{className:_?"result-message":"result-message hidden",children:["Votre r\xe9servation est effectu\xe9e, vous pourrez recuperer votre commande le"," ",Object(A.jsxs)("span",{className:"result-message-date",children:[w()," "]}),"\xe0 partir de"," ",Object(A.jsxs)("span",{className:"result-message-date",children:[" ","11h"]})]}),Object(A.jsx)("p",{className:_?"result-message":"result-message hidden",children:"chez Piuma au 42 Cours Napol\xe9on"})]})]}),!_&&Object(A.jsxs)(Q.a.Content,{children:[Object(A.jsx)("div",{className:"cart-total",children:Object(A.jsxs)("span",{style:{color:"black"},children:["Total: ",k(r).toFixed(2)," ",Object(A.jsx)("small",{children:"\u20ac"})]})}),Object(A.jsxs)(Z.a,{onSubmit:ee,id:"payment-form",loading:S,children:[Object(A.jsxs)(Z.a.Field,{required:!0,children:[Object(A.jsx)("label",{children:"Nom sur votre carte"}),Object(A.jsx)("input",{value:g.name,name:"name",type:"text",onChange:function(e){return W(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,children:[Object(A.jsx)("label",{children:"Num\xe9ro de table"}),Object(A.jsx)("input",{value:g.tableNumber,name:"tableNumber",type:"text",onChange:function(e){return W(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,children:[Object(A.jsx)("label",{children:"Votre Email"}),Object(A.jsx)("input",{value:g.email,name:"email",type:"email",onChange:function(e){return W(e)}})]}),Object(A.jsxs)(Z.a.Field,{required:!0,children:[Object(A.jsx)("label",{children:"Votre Telephone"}),Object(A.jsx)("input",{value:g.tel,name:"tel",type:"tel",onChange:function(e){return W(e)}})]}),Object(A.jsx)(d.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:$})]})]}),Object(A.jsxs)(Q.a.Actions,{children:[_?Object(A.jsx)(oe.b,{to:"/categories/spuntinu",children:Object(A.jsx)(v.a,{style:{alignItems:"center"},type:"button",color:"green",size:"massive",onClick:function(){return t(!1)},children:"Retour \xe0 la boutique"})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(v.a,{form:"payment-form",type:"submit",color:"blue",size:"massive",disabled:S||B||_||!j||!g.name||!g.email||!g.tableNumber||0===!g.items.length||!g.tel,loading:S,children:"Payer"}),Object(A.jsx)(v.a,{type:"button",color:"orange",size:"massive",onClick:function(){return t(!1)},children:"Retour au Panier"})]}),E&&Object(A.jsx)("div",{className:"card-error",role:"alert",children:E})]})]})}),de=function(e){var t,n=e.openUpdateImageModal,a=e.setOpenUpdateImageModal,r=e.product,s=e.setProducts,o=e.setOpenLoginModal,d=e.setAppMessage,u=Object(c.useState)(""),j=Object(i.a)(u,2),b=j[0],p=j[1],O=Object(c.useState)(!1),h=Object(i.a)(O,2),m=h[0],g=h[1],y=Object(c.useRef)(null),C=r._id,k=r.name,S=r.image;Object(c.useEffect)((function(){b&&function(e){var t=document.querySelector(".showimage"),n=new FileReader;t&&(n.onload=function(){t.src=n.result},n.readAsDataURL(e))}(b)}),[b]);var w=localStorage.getItem("token-".concat(I)),N="data:".concat(null===S||void 0===S?void 0:S.contentType,";base64,"),z=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===S||void 0===S||null===(t=S.data)||void 0===t?void 0:t.data);return Object(A.jsxs)(Q.a,{open:n,onClose:function(){return a(!1)},children:[Object(A.jsxs)(f.a,{icon:!0,children:[Object(A.jsx)(X.a,{name:"image"}),"Editer l'image"]}),(S||b)&&Object(A.jsx)(x.a,{children:Object(A.jsx)("img",{className:"showimage",style:{width:"100%",height:"100%"},src:N+z,alt:k})}),Object(A.jsx)(Q.a.Content,{children:Object(A.jsx)(Z.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",b);var n=localStorage.getItem("token-".concat(I));n?(g(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProductImage/").concat(C),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+n}}).then((function(e){e&&200===e.data.status?(s(e.data.data),d({success:200===e.data.status,message:e.data.message})):d({success:200===e.data.status,message:e.data.message})})).then((function(){a(!1),p("")})).catch((function(e){return console.log(e)})).finally((function(){return g(!1)}))):(a(!1),o(!0))},id:"editImage-form",children:Object(A.jsxs)(Z.a.Field,{children:[Object(A.jsx)("input",{ref:y,accept:"image/*",id:"addImage",files:b,type:"file",hidden:!0,onChange:function(e){ee.a.imageFileResizer(e.target.files[0],400,400,"JPEG",100,0,(function(e){p(e)}),"file")}}),Object(A.jsx)(v.a,{disabled:m,loading:m,type:"button",onClick:function(){return y.current.click()},color:"orange",inverted:!0,children:"Modifier l'image"})]})})}),Object(A.jsxs)(Q.a.Actions,{children:[b&&Object(A.jsxs)(v.a,{loading:m,disabled:m,color:"green",type:"submit",form:"editImage-form",inverted:!0,children:[Object(A.jsx)(X.a,{name:"add"})," Envoyer l'image pour ",k]}),S&&Object(A.jsxs)(v.a,{loading:m,disabled:m,type:"button",color:"red",form:"editImage-form",inverted:!0,onClick:function(){w?(g(!0),l()({method:"post",url:"".concat(P,"/api/products/updateProduct"),data:{update:{image:""},productId:C},headers:{Authorization:"Bearer "+w}}).then((function(e){s(e.data.data),d({success:200===e.data.status,message:"Image supprim\xe9e avec succ\xe9s"})})).catch((function(e){return console.log(e)})).finally((function(){g(!1),a(!1)}))):(a(!1),o(!0))},children:[Object(A.jsx)(X.a,{name:"delete"})," Supprimer l'image pour ",k]}),Object(A.jsxs)(v.a,{loading:m,disabled:m,color:"red",type:"submit",form:"editImage-form",inverted:!0,onClick:function(){return a(!1)},children:[Object(A.jsx)(X.a,{name:"remove"})," Annuler"]})]})]})},ue=n(334),je=n(335),be=n(336),pe=(n(274),function(e){var t=e.selectedCategory,n=e.setActiveMenu,a=e.activeMenu,r=e.products,s=e.setFilteredProducts,i=e.setSelectedCategory,o=e.sidebarVisible,l=e.setSidebarVisible,d=e.children;return Object(c.useEffect)((function(){t&&(n(""),s([]),s(r.filter((function(e){return e.type===t.slug&&e.category===a})))),"cave"===t.slug||"spuntinu"===t.slug||"epicerie"===t.slug?t.subCategories.find((function(e){return e.slug===a}))?n(a):n(t.subCategories[0].slug):s(r.filter((function(e){return e.type===t.slug})))}),[t]),Object(A.jsx)(ue.a,{columns:1,children:Object(A.jsx)(ue.a.Column,{children:Object(A.jsxs)(je.a.Pushable,{as:be.a,children:[Object(A.jsxs)(je.a,{style:{background:"white"},as:T.a,animation:"overlay",icon:"labeled",onHide:function(){return l(!1)},onShow:function(){return l(!0)},vertical:!0,visible:o,width:"thin",children:[Object(A.jsx)(oe.b,{to:"/",onClick:function(){return i({})},children:Object(A.jsx)(T.a.Item,{className:"categories-sidebar-item",children:Object(A.jsx)(T.a.Header,{children:Object(A.jsx)("img",{width:"100px",src:"./assets/images/logo.png",alt:"logo piuma"})})})}),Object(A.jsx)(O.a,{}),R.map((function(e){return Object(A.jsx)(oe.b,{to:"/categories/".concat(e.slug),onClick:function(){i(e),l(!1)},children:Object(A.jsxs)(T.a.Item,{className:"categories-sidebar-item",children:[Object(A.jsx)(T.a.Header,{children:e.icon}),Object(A.jsx)("span",{children:e.name})]})},e.slug)}))]}),Object(A.jsx)(je.a.Pusher,{dimmed:o,children:Object(A.jsx)(be.a,{basic:!0,children:d})})]})})})}),Oe=n(163),he=(n(275),function(e){e.facebookUrl,e.instagramUrl,e.email,e.phoneNumber,e.backgroundColor,e.productBackgroundColor,e.textColor,e.titleColor;return Object(A.jsxs)("div",{className:"footer",children:[Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{as:"h3",children:"Retrouvez nous sur : "})}),Object(A.jsxs)("div",{className:"footer__icons",children:[Object(A.jsx)("a",{target:"_blank",href:"fb://profile/104822281341917",rel:"noreferrer",children:Object(A.jsx)(g.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:Oe.a,pull:"left"})}),Object(A.jsx)("a",{target:"_blank",href:"https://www.instagram.com/a_piuma_/?hl=fr",rel:"noreferrer",children:Object(A.jsx)(g.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:Oe.b,pull:"right"})})]}),Object(A.jsx)(O.a,{}),Object(A.jsx)("div",{children:Object(A.jsx)(f.a,{as:"h3",children:"Contactez nous ! "})}),Object(A.jsxs)("div",{className:"footer__icons",children:[Object(A.jsx)("a",{href:"mailto:cafe-rotisserie@piuma.corsica",children:Object(A.jsx)(g.a,{style:{"--fa-primary-color":"white","--fa-secondary-color":"black","--fa-secondary-opacity":.8},size:"3x",icon:m.g,pull:"left"})}),Object(A.jsx)("a",{href:"tel:06 23 47 66 66",children:Object(A.jsx)(g.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:m.p,pull:"right"})})]}),Object(A.jsx)(O.a,{}),Object(A.jsxs)("div",{className:"footer__copyright",style:{color:"black"},children:["Copyright \xa9 ",Object(A.jsx)("a",{style:{color:"black"},href:"https://piuma.corsica",children:Object(A.jsx)("span",{children:"Piuma \xa0"})}),Object(A.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(A.jsx)("div",{className:"footer__alvp",children:Object(A.jsxs)("a",{style:{color:"black",fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(A.jsx)(g.a,{className:"alvp__icon",color:"darkred",icon:m.l,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})}),me=(n(276),function(e){var t=e.setSelectedCategory,n=e.setSidebarVisible,a=e.setOpenLoginModal,r=e.user,s=e.loading,o=e.cart,l=e.isAProductShoppable,d=Object(c.useState)(!1),u=Object(i.a)(d,2);u[0],u[1];return Object(A.jsxs)("div",{className:"topappbar",children:[Object(A.jsx)(oe.b,{to:"/",onClick:function(){return t({})},children:Object(A.jsx)("div",{className:"topappbar-image",children:Object(A.jsx)("img",{width:"100px",src:"./assets/images/logo.png",alt:"logo piuma"})})}),Object(A.jsxs)("div",{className:"topappbar-icons",children:[Object(A.jsx)(v.a,{disabled:s,loading:s,icon:!0,circular:!0,color:r?"green":"grey",onClick:function(){return a(!0)},children:Object(A.jsx)(g.a,{size:"2x",icon:m.z})}),Object(A.jsx)(v.a,{disabled:s,loading:s,icon:!0,circular:!0,onClick:function(){return n(!0)},children:Object(A.jsx)(g.a,{size:"2x",icon:m.b})}),l&&Object(A.jsx)(oe.b,{to:"/panier",children:Object(A.jsx)(v.a,{disabled:s,loading:s,color:"orange",icon:!0,circular:!0,onClick:function(){return console.log("cart clicked")},children:Object(A.jsxs)("span",{style:{position:"relative"},className:"fa-layers fa-2x fa-fw",children:[Object(A.jsx)(g.a,{icon:m.v}),Object(A.jsx)("span",{style:{position:"absolute",top:"-23px",right:"-12px"},className:"fa-layers-top-right fa-layers-counter fa-2x",children:o.length})]})})})]}),0!==k(o)&&Object(A.jsxs)("span",{className:"cartamount",children:["Montant dans votre panier : ",k(o).toFixed(2),Object(A.jsx)("small",{children:"\u20ac"})]})]})}),ge=(n(277),n(212)),xe=n.n(ge),fe=n(329),ve=n(143),ye=n(93),Ce=n(328),ke=function(e){var t=e.socket,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(!1),d=Object(i.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)(!1),p=Object(i.a)(b,2),O=p[0],m=p[1],g=Object(c.useState)(!1),x=Object(i.a)(g,2),f=x[0],y=x[1],C=localStorage.getItem("token-".concat(I)),k=function(){var e=Object(K.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,l()({method:"get",url:"".concat(P,"/api/orders/allOrders"),headers:{Authorization:"Bearer "+C}});case 3:(t=e.sent)&&200===t.data.status&&(s(Object(h.a)(t.data.orders)),j(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(K.a)(Y.a.mark((function e(n,a){var c,r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,l()({method:"post",url:"".concat(P,"/api/orders/updateOrder"),data:{update:n,orderId:a},headers:{Authorization:"Bearer "+C}});case 3:(c=e.sent)&&200===c.data.status&&(j(!1),m(!1),y(!1),r=c.data.foundOrder,t.emit("sendOrderToWaiter",r));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){k(),t.on("sendOrder",(function(e){r&&s((function(t){return[e].concat(Object(h.a)(t))}))}))}),[]);var w=function(e,t){return!!e.find((function(e){return e.type===t}))};return Object(A.jsxs)(fe.a,{celled:!0,children:[Object(A.jsx)(fe.a.Header,{children:Object(A.jsxs)(fe.a.Row,{children:[Object(A.jsx)(fe.a.HeaderCell,{children:"New ?"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Table"}),Object(A.jsx)(fe.a.HeaderCell,{children:"date"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Montant"}),Object(A.jsx)(fe.a.HeaderCell,{children:"status"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Id de Transaction"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Commande"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Commande pr\xe8te ?"})]})}),Object(A.jsx)(fe.a.Body,{children:null===r||void 0===r?void 0:r.sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e,t){var n=e.tableNumber,a=e.date,c=e.amount,i=e.transaction,o=e.status,l=e.items;return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(fe.a.Row,{positive:"PR\xcaTE"===o,children:[Object(A.jsx)(fe.a.Cell,{children:"PAID"===o&&Object(A.jsx)(ve.a,{ribbon:!0,color:"green",children:"New"})}),Object(A.jsx)(ye.a,{children:n}),Object(A.jsx)(ye.a,{children:a}),Object(A.jsxs)(ye.a,{children:[null===c||void 0===c?void 0:c.toFixed(2)," ",Object(A.jsx)("small",{children:"\u20ac"})]}),Object(A.jsx)(ye.a,{style:{color:"ATTENTE CUISINE"===o?"red":"ATTENTE BAR"===o?"blue":"lime"},children:o}),Object(A.jsx)(ye.a,{children:i.paymentIntent.id}),Object(A.jsx)(ye.a,{children:Object(A.jsx)(Ce.a,{children:l.map((function(e){var t=e.name,n=e.type,a=e.category,c=e.region,r=e.infos;return Object(A.jsx)(Ce.a.Item,{children:Object(A.jsxs)("div",{style:{fontSize:"1.3em",lineHeight:"1.3",color:"aujourd'hui"===n?"red":"blue"},children:[Object(A.jsxs)("span",{children:[" ",t," "]}),Object(A.jsxs)("span",{children:[a," "]}),Object(A.jsxs)("span",{children:[c," "]}),Object(A.jsxs)("p",{style:{color:"green",textTransform:"uppercase"},children:[r," "]})]})})}))})}),Object(A.jsxs)(ye.a,{textAlign:"center",children:[l.find((function(e){return"cave"===e.type}))&&Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(v.a,{disabled:u||"PR\xcaTE"===o||O,loading:u,type:"button",color:"blue",content:"Bar Pr\xeat",onClick:function(){return function(e){var t=Object(z.a)({},e);m(!0),t.status=w(t.items,"aujourd'hui")&&!f?"ATTENTE CUISINE":"PR\xcaTE";var n=r.findIndex((function(t){return t._id===e._id})),a=Object(h.a)(r);a[n]=t,a.splice(n,1),s([t].concat(Object(h.a)(a))),"PR\xcaTE"===t.status&&S({status:t.status},t._id)}(e)}})}),l.find((function(e){return"aujourd'hui"===e.type}))&&Object(A.jsx)(v.a,{disabled:u||"PR\xcaTE"===o||f,loading:u,type:"button",color:"red",content:"Cuisine Pr\xeate",onClick:function(){return function(e){var t=Object(z.a)({},e);y(!0),t.status=w(t.items,"cave")&&!O?"ATTENTE BAR":"PR\xcaTE";var n=r.findIndex((function(t){return t._id===e._id})),a=Object(h.a)(r);a[n]=t,a.splice(n,1),s([t].concat(Object(h.a)(a))),"PR\xcaTE"===t.status&&S({status:t.status},t._id)}(e)}})]})]})})}))})]})},Se=function(e){var t=e.socket,n=e.user,a=Object(c.useState)({}),r=Object(i.a)(a,2),s=(r[0],r[1]),o=Object(c.useState)([]),l=Object(i.a)(o,2),d=l[0],u=l[1];Object(c.useEffect)((function(){t.on("waiterOrder",(function(e){e.waiter._id===n._id&&(s(e.waiter),u((function(t){return[e.order].concat(Object(h.a)(t))})))}))}),[]);return Object(A.jsxs)("div",{children:[Object(A.jsxs)("p",{children:["Hello, ",n.email]}),Object(A.jsxs)(fe.a,{celled:!0,compact:!0,children:[Object(A.jsx)(fe.a.Header,{children:Object(A.jsxs)(fe.a.Row,{children:[Object(A.jsx)(fe.a.HeaderCell,{children:"Nouvelle ?"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Table"}),Object(A.jsx)(fe.a.HeaderCell,{children:"Commande"})]})}),Object(A.jsx)(fe.a.Body,{children:d.map((function(e,t){var n=e.tableNumber,a=e.status,c=e.items;return Object(A.jsxs)(fe.a.Row,{positive:"PR\xcaTE"===a,children:[Object(A.jsx)(fe.a.Cell,{children:"PAID"===a&&Object(A.jsx)(ve.a,{ribbon:!0,color:"green",children:"New"})}),Object(A.jsxs)(ye.a,{children:["Table",n]}),Object(A.jsx)(ye.a,{children:Object(A.jsx)(Ce.a,{style:{background:"grey"},children:c.map((function(e){var t=e.name,n=e.type,a=e.category,c=e.region,r=e.infos;return Object(A.jsx)(Ce.a.Item,{children:Object(A.jsxs)("div",{style:{fontSize:"1.3em",lineHeight:"1.3",color:"aujourd'hui"===n?"red":"blue"},children:[Object(A.jsxs)("span",{style:"rouges"===a?{color:"darkred"}:"roses"===a?{color:"#fec5d9"}:"blancs"===a?{color:"#f1f285"}:{color:"inherit"},children:[" ",t," "]}),Object(A.jsxs)("span",{children:[a," "]}),Object(A.jsxs)("span",{children:[c," "]}),Object(A.jsxs)("p",{style:{color:"green",textTransform:"uppercase"},children:[r," "]})]})})}))})})]})}))})]})]})},we=Object(u.a)("pk_test_eAyr9trbJArTYHJJgEePgULj00lTTB2TXk"),Pe=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)({}),o=Object(i.a)(s,2),u=o[0],h=o[1],m=Object(c.useState)(""),g=Object(i.a)(m,2),x=g[0],f=g[1],v=Object(c.useState)(""),y=Object(i.a)(v,2),C=y[0],k=y[1],S=Object(c.useState)(""),w=Object(i.a)(S,2),I=w[0],z=w[1],M=Object(c.useState)(!1),E=Object(i.a)(M,2),F=E[0],L=E[1],T=Object(c.useState)(!1),_=Object(i.a)(T,2),D=_[0],R=_[1],V=Object(c.useState)(!1),B=Object(i.a)(V,2),H=B[0],q=B[1],J=Object(c.useState)(!1),W=Object(i.a)(J,2),Y=W[0],K=W[1],Q=Object(c.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)(!1),ne=Object(i.a)(ee,2),ce=ne[0],oe=ne[1],ue=Object(c.useState)(!1),je=Object(i.a)(ue,2),be=(je[0],je[1]),Oe=Object(c.useState)({}),ge=Object(i.a)(Oe,2),fe=ge[0],ve=ge[1],ye=Object(c.useState)([]),Ce=Object(i.a)(ye,2),Pe=Ce[0],Ie=Ce[1],Ae=Object(c.useState)({}),Ne=Object(i.a)(Ae,2),ze=Ne[0],Me=Ne[1],Ee=Object(c.useState)(!1),Fe=Object(i.a)(Ee,2),Le=Fe[0],Te=Fe[1],_e=Object(c.useState)({}),De=Object(i.a)(_e,2),Re=De[0],Ve=De[1],Be=Object(c.useState)([]),He=Object(i.a)(Be,2),Ue=He[0],qe=He[1],Je=Object(c.useState)(!1),Ge=Object(i.a)(Je,2),We=(Ge[0],Ge[1]),Ye=Object(c.useState)([]),Ke=Object(i.a)(Ye,2),Qe=Ke[0],Xe=Ke[1],Ze=Object(c.useState)([]),$e=Object(i.a)(Ze,2),et=$e[0],tt=$e[1],nt=Object(c.useState)(!1),at=Object(i.a)(nt,2),ct=at[0],rt=at[1],st=Pe.some((function(e){return e.showInShop})),it=window.location.pathname.replace("/","");return Object(c.useEffect)((function(){a=xe()(P)}),[P]),Object(c.useEffect)((function(){0!==Object.keys(ze).length&&setTimeout((function(){Me({})}),5e3)}),[ze]),Object(c.useEffect)((function(){Te(!0),l.a.get("".concat(P,"/api/products/allProducts")).then((function(e){e&&Ie(e.data.data)})).catch((function(e){return Me({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return Te(!1)})),We(!0),l.a.get("".concat(P,"/api/events/getEvent")).then((function(e){e&&Ve(e.data.data)})).catch((function(e){Me({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return We(!1)}))}),[]),Object(A.jsx)("div",{className:"App",style:{position:"relative"},children:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(b.a,{animation:"jiggle",duration:500,visible:Object.keys(ze).length>0,children:Object(A.jsx)(p.a,{style:{position:"fixed",top:15,zIndex:"1000",width:"100%"},hidden:0===Object.keys(ze).length,success:!!ze.success,error:!ze.success,children:ze.message})}),Object(A.jsxs)(pe,{setActiveMenu:f,activeMenu:x,setDropdownValue:k,selectedCategory:u,setFilteredProducts:qe,products:Pe,sidebarVisible:n,setSidebarVisible:r,setSelectedCategory:h,children:[Object(A.jsx)(me,{cart:et,setCart:tt,setSelectedCategory:h,loading:Le,user:I,setSidebarVisible:r,setOpenLoginModal:L,isAProductShoppable:st}),Object(A.jsx)(O.a,{hidden:!0}),Object(A.jsx)(ie,{setUser:z,openLoginModal:F,setOpenLoginModal:L,setAppMessage:Me}),Object(A.jsxs)(j.c,{children:[Object(A.jsxs)(j.a,{exact:!0,path:"/",children:[Object(A.jsx)(te,{setEvent:Ve,setAppMessage:Me,setOpenLoginModal:L,openAddEventModal:ce,setOpenAddEventModal:oe}),Object(A.jsx)(G,{user:I,event:Re,products:Pe,setEvent:Ve,setSelectedCategory:h,setActiveMenu:f,setOpenLoginModal:L,setOpenAddEventModal:oe,setOpenEditEventModal:be})]}),Object(A.jsxs)(j.a,{path:"/categories/:categorie",children:[Object(A.jsx)(ae,{setProducts:Ie,selectedCategory:u,setOpenLoginModal:L,setAppMessage:Me,openAddProductModal:D,setOpenAddProductModal:R}),Object(A.jsx)(re,{product:fe,setOpenEditProductModal:q,setAppMessage:Me,setOpenLoginModal:L,openEditProductModal:H,setProducts:Ie}),Object(A.jsx)(de,{openUpdateImageModal:Z,setOpenUpdateImageModal:$,setProducts:Ie,product:fe,setOpenLoginModal:L,setAppMessage:Me}),Object(A.jsx)(se,{openImageModal:Y,setOpenImageModal:K,product:fe}),Object(A.jsx)(U,{filteredProducts:Ue,setFilteredProducts:qe,user:I,setCart:tt,cart:et,selectedCategory:u,activeMenu:x,setActiveMenu:f,dropdownValue:C,setDropdownValue:k,products:Pe,setProducts:Ie,setOpenLoginModal:L,setOpenAddProductModal:R,setOpenImageModal:K,setOpenUpdateImageModal:$,setOpenEditProductModal:q,setSelectedProduct:ve})]}),st&&Object(A.jsxs)(j.a,{path:"/panier",children:[Object(A.jsx)(N,{setOpenPaymentModal:rt,cart:et,setCart:tt,order:Qe,setOrder:Xe}),Object(A.jsx)(d.Elements,{stripe:we,children:Object(A.jsx)(le,{tableNumber:it,setOpenPaymentModal:rt,openPaymentModal:ct,setOrder:Xe,setCart:tt,cart:et,order:Qe,socket:a})})]}),a&&I&&"isAdmin"===I.role&&Object(A.jsx)(j.a,{path:"/commandes",children:Object(A.jsx)(ke,{socket:a})}),a&&I&&("isAdmin"===I.role||"waiter"===I.role)&&Object(A.jsx)(j.a,{path:"/serveur",children:Object(A.jsx)(Se,{socket:a,user:I})})]}),Object(A.jsx)(O.a,{}),Object(A.jsx)(he,{})]})]})})},Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,338)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(307);s.a.render(Object(A.jsx)(oe.a,{basename:"/",children:Object(A.jsx)(Pe,{})}),document.getElementById("root")),Ie()}},[[308,1,2]]]);
//# sourceMappingURL=main.d37a21fa.chunk.js.map