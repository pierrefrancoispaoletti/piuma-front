(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{196:function(e,t,a){},218:function(e,t,a){},228:function(e,t,a){},234:function(e,t,a){},235:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},247:function(e,t,a){},249:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(52),r=a.n(c),s=(a(196),a(8)),i=a(15),o=a.n(i),l=a(72),d=a(175),u=a(14),j=a(267),b=a(269),p=a(262),O=a(45),m=a(11),g=a(10),h=a(261),f=a(271),x=a(270),v=a(71),y=["image"],C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.length>0?e.reduce((function(e,t){return t.weight?e+t.price*(t.weight/1e3):e+t.price}),0):0},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(a.image,Object(v.a)(a,y));e([].concat(Object(O.a)(t),[n]))},S=(a(218),a(0)),w=function(e){var t=e.cart,a=e.setCart,c=e.order,r=e.setOrder,s=e.setOpenPaymentModal,i=t.reduce((function(e,t){var a=t._id;return e[a]=(e[a]||0)+1,e}),{}),o=Object.keys(i).map((function(e){return{id:e,count:i[e]}}));Object(n.useEffect)((function(){r(Object(O.a)(t))}),[t]);return Object(S.jsxs)(h.a,{className:"cart",children:[Object(S.jsx)(f.a,{className:"categories-header",style:{color:"white"},as:"h2",children:Object(S.jsx)("span",{style:{textDecoration:"underline"},children:"Votre Panier"})}),Object(S.jsx)(p.a,{hidden:!0}),Object(S.jsxs)("div",{className:"cart-description",children:[Object(S.jsxs)("div",{className:"cart-header",children:[Object(S.jsx)("div",{className:"cart-total",children:Object(S.jsxs)("span",{children:["Total: ",C(t).toFixed(2)," ",Object(S.jsx)("small",{children:"\u20ac"})]})}),Object(S.jsx)(x.a,{color:"blue",size:"large",disabled:"0.00"===C(t).toFixed(2)||t.some((function(e){return"weight"in e&&!e.weight})),onClick:function(){return s(!0)},children:"Commander"})]}),o.map((function(e){var n,s,i=(n=t,s=e.id,n.find((function(e){return e._id===s}))),o=i.name,l=i._id,d=i.price,u=i.description,j=i.region,b=i.weight;return Object(S.jsxs)("div",{className:"cart-product",children:[Object(S.jsx)("div",{className:"cart-product-title",children:o}),Object(S.jsx)("div",{className:"cart-product-amount",children:Object(S.jsxs)("span",{children:[Object(S.jsx)(x.a,{icon:!0,circular:!0,size:"mini",onClick:function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t.findIndex((function(e){return e._id===a}));console.log(t,"currentCart",n);var c=Object(O.a)(t);c.splice(n,1),e(Object(O.a)(c))}(a,t,l)},children:Object(S.jsx)(g.a,{size:"2x",color:"red",icon:m.o})}),Object(S.jsxs)("span",{className:"counter",children:["Quantit\xe9 : ",e.count]}),Object(S.jsx)(x.a,{icon:!0,circular:!0,size:"mini",onClick:function(){return k(a,t,i)},children:Object(S.jsx)(g.a,{size:"2x",color:"green",icon:m.r})})]})}),u&&Object(S.jsx)("div",{className:"cart-product-description",children:Object(S.jsx)("p",{children:u})}),Object(S.jsx)("div",{className:"cart-product-unitprice",children:Object(S.jsxs)("p",{children:["Prix unitaire: ",d," ",Object(S.jsx)("small",{children:"\u20ac"})," / ",j]})}),Object(S.jsx)("div",{className:"cart-product-subtotal",children:"au kilo"===j.toLowerCase()?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("label",{children:"Poids d\xe9sir\xe9 "}),Object(S.jsxs)("select",{required:!0,name:e.id,value:b,onChange:function(e){return function(e){var t=c.find((function(t){return t._id===e.target.name}));t.weight=Number(e.target.value)||0;var a=c.findIndex((function(t){return t._id===e.target.name})),n=Object(O.a)(c);n[a]=t,r(Object(O.a)(n))}(e)},children:[Object(S.jsx)("option",{value:"",children:"Selectionnez un poids"}),Object(S.jsx)("option",{value:300,children:"300"}),Object(S.jsx)("option",{value:350,children:"350"}),Object(S.jsx)("option",{value:400,children:"400"}),Object(S.jsx)("option",{value:450,children:"450"}),Object(S.jsx)("option",{value:500,children:"500"}),Object(S.jsx)("option",{value:550,children:"550"}),Object(S.jsx)("option",{value:600,children:"600"}),Object(S.jsx)("option",{value:650,children:"650"}),Object(S.jsx)("option",{value:700,children:"700"}),Object(S.jsx)("option",{value:750,children:"750"}),Object(S.jsx)("option",{value:800,children:"800"}),Object(S.jsx)("option",{value:850,children:"850"}),Object(S.jsx)("option",{value:900,children:"900"}),Object(S.jsx)("option",{value:950,children:"950"}),Object(S.jsx)("option",{value:1e3,children:"1000"})]}),"grammes",b>0&&Object(S.jsxs)("p",{children:["Sous-Total :",(d*(b/1e3)*e.count).toFixed(2),Object(S.jsx)("small",{children:"\u20ac"})]})]}):Object(S.jsxs)("p",{children:["Sous-Total :",(d*e.count).toFixed(2),Object(S.jsx)("small",{children:"\u20ac"})]})})]})})),Object(S.jsxs)("div",{className:"cart-header",children:[Object(S.jsx)("div",{className:"cart-total",children:Object(S.jsxs)("span",{children:["Total: ",C(t).toFixed(2)," ",Object(S.jsx)("small",{children:"\u20ac"})]})}),Object(S.jsx)(x.a,{color:"blue",size:"large",disabled:"0.00"===C(t).toFixed(2)||t.some((function(e){return"weight"in e&&!e.weight})),onClick:function(){return s(!0)},children:"Commander"})]})]})]})},M=a(12),P=function(e){var t=e.loading,a=e.visible,n=e._id,c=e.choice,r=e.product,s=e.handleDeleteProduct,i=e.handleChangeChoice,o=e.handleChangeVisibility,l=e.setSelectedProduct,d=e.setOpenEditProductModal,u=e.setOpenUpdateImageModal;return Object(S.jsxs)("div",{className:"adminbuttons",children:[Object(S.jsx)(x.a,{disabled:t,loading:t,circular:!0,icon:"remove",size:"large",color:"red",onClick:function(){return s(n)}}),Object(S.jsx)(x.a,{disabled:t,loading:t,circular:!0,icon:"edit",size:"large",color:"purple",onClick:function(){l(r),d(!0)}}),Object(S.jsx)(x.a,{disabled:t,loading:t,circular:!0,icon:a?"hide":"unhide",size:"large",onClick:function(){return o(r)}}),Object(S.jsx)(x.a,{disabled:t,loading:t,circular:!0,icon:"heart",size:"large",color:c?"red":"grey",onClick:function(){return i(r)}}),Object(S.jsx)(x.a,{disabled:t,loading:t,circular:!0,icon:"image",size:"large",color:"yellow",onClick:function(){l(r),u(!0)}})]})},z=a(104),A=a(147),N=(a(228),"https://inde-piuma.herokuapp.com"),F="piuma",I=function(e){var t=e.product,a=e._id,n=e.name,c=e.type,r=e.region,s=e.description,i=e.price,o=e.category,l=e.choice,d=e.visible,j=e.image,b=e.user,p=e.setOpenImageModal,O=e.setSelectedProduct,h=e.setCart,v=e.cart,y=Object(u.f)(),C=navigator.language||navigator.userLanguage,w={get:function(e,t){return((JSON.parse(localStorage.getItem("translations"))||{})[t]||{})[e]},set:function(e,t,a){var n=JSON.parse(localStorage.getItem("translations"))||Object(z.a)({},t,{});n[t]=Object(M.a)(Object(M.a)({},n[t]),{},Object(z.a)({},e,a)),localStorage.setItem("translations",JSON.stringify(n))}};return Object(S.jsxs)("div",{id:a,className:"productitem",style:{display:d||b?"":"none",border:decodeURI(y.location.hash.replace("#",""))===a?"8px solid darkred":""},children:[Object(S.jsxs)("div",{className:"productitem-header",children:[Object(S.jsxs)(f.a,{as:"h3",style:"cave"===c&&"rouges"===o?{color:"darkred"}:"cave"===c&&"roses"===o?{color:"#fec5d9"}:"cave"===c&&"blancs"===o?{color:"#f1f285"}:{color:""},children:[d?"":"Cach\xe9 : ",n,j&&Object(S.jsx)(g.a,{style:{color:"white",marginLeft:8},icon:m.u,onClick:function(){O(t),p(!0)}}),l&&Object(S.jsx)(g.a,{className:"bosschoice alvp__icon",icon:m.m,style:{"--fa-primary-color":"darkred","--fa-secondary-color":"transparent"},size:"2x"})]}),"spuntinu"===c&&"isAdmin"!==b&&Object(S.jsxs)(x.a,{className:"addtocart",icon:!0,circular:!0,color:"orange",onClick:function(){return k(h,v,t)},children:[Object(S.jsx)(g.a,{size:"2x",icon:m.d}),Object(S.jsx)("span",{className:"itemcounter",children:v.filter((function(e){return e._id===a})).length})]}),"cave"===c&&"verre de vin"!==n.toLowerCase()?Object(S.jsxs)("span",{className:"price",children:[i.toFixed(2)-7,Object(S.jsx)("small",{children:"\u20ac"})]}):Object(S.jsxs)("span",{className:"price",children:[i.toFixed(2),Object(S.jsx)("small",{children:"\u20ac"})]})]}),r&&Object(S.jsxs)("div",{className:"region-wrapper",children:[Object(S.jsx)("div",{className:"region",children:r}),"cave"===c&&"verre de vin"!==n.toLowerCase()&&Object(S.jsxs)("span",{className:"region",children:["Sur place : ".concat(i.toFixed(2)),Object(S.jsx)("small",{children:"\u20ac"})]})]}),s&&Object(S.jsx)(A.b,{cacheProvider:w,from:"fr",to:C.substr(0,2),googleApiKey:"AIzaSyAZaWwVgn5z9gNPy0cbweEVGUeWwva5GGM",children:Object(S.jsx)("p",{className:"description",children:Object(S.jsx)(A.a,{children:s})})})]})},E=a(265),L=a(264),D=function(e){var t=e.dropdownValue,a=e.subCategories,n=e.activeMenu,c=e.setActiveMenu,r=e.setDropdownValue,s=e.products;return Object(S.jsx)(E.a,{compact:!0,borderless:!0,icon:"labeled",className:"categories-menu",style:{position:"relative"},children:a.map((function(e){return Object(S.jsx)(S.Fragment,{children:e.subCat?Object(S.jsxs)("div",{style:{position:"relative"},children:[Object(S.jsx)("sup",{style:{position:"absolute",top:9,right:3,zIndex:10},children:Object(S.jsx)("span",{className:"badge",children:s&&s.filter((function(t){return t.category===e.slug&&t.visible})).length})}),Object(S.jsx)(L.a,{className:n===e.slug?"categories-dropdown active":"categories-dropdown",item:!0,icon:e.icon,text:e.name,onClick:function(){return c(e.slug)},children:Object(S.jsx)(L.a.Menu,{direction:"blancs"===n&&"blancs"===e.slug&&"left",children:e.subCat.map((function(e){return Object(S.jsx)(L.a.Item,{active:t===e.slug,onClick:function(t){return r(e.slug)},children:Object(S.jsxs)("span",{className:"dropdown-menuitem",children:[e.name,Object(S.jsx)("span",{className:"badge",children:s&&s.filter((function(t){return t.subCategory===e.slug&&t.visible})).length})]})},e.slug)}))})},e.slug)]}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(E.a.Item,{style:{position:"relative"},className:"menu-items",active:n===e.slug,onClick:function(){return c(e.slug)},children:[Object(S.jsx)(E.a.Header,{children:e.icon}),e.name,Object(S.jsx)("sup",{style:{position:"absolute",top:9,right:3},children:Object(S.jsx)("span",{className:"badge top-menu",children:s&&s.filter((function(t){return t.category===e.slug&&t.visible})).length})})]},e.slug)})})}))})},_=[{name:"Aujourd'hui",slug:"aujourd'hui",icon:Object(S.jsx)(g.a,{size:"4x",icon:m.y,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})},{name:"L'\xc9picerie",slug:"epicerie",icon:Object(S.jsx)(g.a,{size:"4x",icon:m.a,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Les Sal\xe9s",slug:"sal\xe9s-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.h,style:{"--fa-primary-color":"darkred"}})},{name:"Les Petits Pots",slug:"pots-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.k,style:{"--fa-primary-color":"darkred"}})},{name:"Les Huiles et Vinaigres",slug:"huile-et-vinaigres-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.n,style:{"--fa-primary-color":"darkred"}})},{name:"Les Assaisonements",slug:"assaisonements-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.s,style:{"--fa-primary-color":"darkred"}})},{name:"Les Terrines",slug:"terrines-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.q,style:{"--fa-primary-color":"darkred"}})},{name:"Les Charcuteries",slug:"charcuteries-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.t,style:{"--fa-primary-color":"darkred"}})},{name:"Les Fromages",slug:"fromages-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.e,style:{"--fa-primary-color":"darkred"}})},{name:"Les Douceurs",slug:"douceurs-p",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.f,style:{"--fa-primary-color":"darkred"}})}]},{name:"Assiettes \xe0 composer",slug:"spuntinu",details:"\xc0 partir de 18h",icon:Object(S.jsx)(g.a,{size:"4x",icon:m.q,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Les Sal\xe9s",slug:"sal\xe9s",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.h,style:{"--fa-primary-color":"darkred"}})},{name:"Les Petits Pots",slug:"pots",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.k,style:{"--fa-primary-color":"darkred"}})},{name:"Les Terrines",slug:"terrines",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.q,style:{"--fa-primary-color":"darkred"}})},{name:"Les Charcuteries",slug:"charcuteries",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.t,style:{"--fa-primary-color":"darkred"}})},{name:"Les Fromages",slug:"fromages",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.e,style:{"--fa-primary-color":"darkred"}})},{name:"Les Douceurs",slug:"douceurs",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.f,style:{"--fa-primary-color":"darkred"}})}]},{name:"La Cave",slug:"cave",icon:Object(S.jsx)(g.a,{icon:m.A,size:"4x",style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}}),subCategories:[{name:"Vins Rouges",slug:"rouges",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"darkred"}})},{name:"Vins Ros\xe9s",slug:"roses",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"#fec5d9"}})},{name:"Vins Blancs",slug:"blancs",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.A,style:{"--fa-primary-color":"#f1f285"}})},{name:"Les Champagnes",slug:"champagnes",icon:Object(S.jsx)(g.a,{size:"3x",icon:m.i,style:{"--fa-primary-color":"white"}})}]},{name:"Les Bi\xe8res",slug:"bieres",icon:Object(S.jsx)(g.a,{size:"4x",icon:m.c,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})},{name:"Les Softs",slug:"softs",icon:Object(S.jsx)(g.a,{size:"4x",icon:m.j,style:{"--fa-primary-color":"#AF2127","--fa-secondary-color":"grey"}})}],V=(a(234),["image"]),T=["image"],R=function(e){var t,a,c=e.setFilteredProducts,r=e.selectedCategory,i=e.dropdownValue,l=e.activeMenu,d=e.setActiveMenu,j=e.setDropdownValue,b=e.products,O=e.filteredProducts,y=e.user,C=e.setOpenAddProductModal,k=e.setProducts,w=e.setOpenLoginModal,z=e.setSelectedProduct,A=e.setOpenEditProductModal,E=e.setOpenImageModal,L=e.setOpenUpdateImageModal,R=e.setCart,q=e.cart,U=(Object(u.g)(),r.name),B=r.subCategories,J=r.details,G=Object(n.useState)(!1),H=Object(s.a)(G,2),W=H[0],Y=H[1],K=("vins"===r.slug&&((null===r||void 0===r||null===(t=r.subCategories[0])||void 0===t?void 0:t.subCat.find((function(e){e.name;return e.slug===i})))||(null===r||void 0===r||null===(a=r.subCategories[2])||void 0===a||a.subCat.find((function(e){e.name;return e.slug===i})))),Object(n.useRef)());Object(n.useEffect)((function(){K.current=i}));K.current;Object(n.useEffect)((function(){c(b.filter((function(e){return e.type===r.slug})))}),[b]),Object(n.useEffect)((function(){j(""),l&&c(null===b||void 0===b?void 0:b.filter((function(e){return e.category===l})))}),[l]),Object(n.useEffect)((function(){i&&(j(i),c(null===b||void 0===b?void 0:b.filter((function(e){return e.subCategory===i}))))}),[i]);var Q=localStorage.getItem("token-".concat(F)),X=function(e){Q?(Y(!0),o()({method:"delete",url:"".concat(N,"/api/products/deleteProduct"),data:{productId:e},headers:{Authorization:"Bearer "+Q}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}))):w(!0)},Z=function(e){e.image;var t=Object(v.a)(e,V);t.visible=!e.visible,Q?(Y(!0),o()({method:"post",url:"".concat(N,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+Q}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}))):w(!0)},$=function(e){e.image;var t=Object(v.a)(e,T);t.choice=!e.choice,Q?(Y(!0),o()({method:"post",url:"".concat(N,"/api/products/updateProduct"),data:{update:t,productId:e._id},headers:{Authorization:"Bearer "+Q}}).then((function(e){return k(e.data.data)})).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}))):w(!0)};return Object(S.jsxs)(h.a,{className:"categories",children:[y&&Object(S.jsx)("div",{children:Object(S.jsx)(x.a,{color:"green",circular:!0,size:"medium",onClick:function(){return C(!0)},children:Object(S.jsx)(g.a,{icon:m.r,size:"2x"})})}),Object(S.jsxs)(f.a,{className:"categories-header",style:{color:"white"},as:"h2",children:[Object(S.jsx)("span",{style:{textDecoration:"underline"},children:U}),J&&Object(S.jsx)("p",{style:{color:"black",fontSize:"0.5em",textDecoration:""},children:J})]}),l&&Object(S.jsx)(f.a,{className:"categories-header",as:"h3",style:"rouges"===l?{color:"darkred"}:"roses"===l?{color:"#fec5d9"}:"blancs"===l?{color:"#f1f285"}:{color:"white"},children:_.filter((function(e){var t;return null===e||void 0===e||null===(t=e.subCategories)||void 0===t?void 0:t.find((function(e){return e.slug===l}))}))[0].subCategories.find((function(e){return e.slug===l})).name}),Object(S.jsx)(p.a,{hidden:!0}),B&&Object(S.jsx)(D,{products:b,dropdownValue:i,subCategories:B,activeMenu:l,setActiveMenu:d,setDropdownValue:j}),Object(S.jsx)(p.a,{hidden:!0}),Object(S.jsx)("div",{className:"products",children:null===O||void 0===O?void 0:O.sort((function(e,t){return e.price-t.price})).sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:t.name.toLowerCase()>e.name.toLowerCase()?-1:0})).sort((function(e,t){return t.choice-e.choice})).map((function(e){return Object(S.jsxs)(S.Fragment,{children:[y&&Object(S.jsx)(P,Object(M.a)(Object(M.a)({loading:W},e),{},{product:e,handleDeleteProduct:X,handleChangeVisibility:Z,handleChangeChoice:$,setSelectedProduct:z,setOpenEditProductModal:A,setOpenUpdateImageModal:L})),Object(S.jsx)(I,Object(M.a)(Object(M.a)({product:e},e),{},{user:y,setOpenImageModal:E,setSelectedProduct:z,setCart:R,cart:q}),e._id)]})}))}),Object(S.jsx)(p.a,{hidden:!0}),B&&O.length>1&&Object(S.jsx)(D,{products:b,dropdownValue:i,subCategories:B,activeMenu:l,setActiveMenu:d,setDropdownValue:j})]})},q=(a(235),a(236),a(180)),U=a(181),B=function(e){var t,a,c,r,i=e.user,l=e.event,d=e.setEvent,u=e.setOpenAddEventModal,j=e.setSelectedCategory,b=e.setActiveMenu,p=e.products,O=e.setOpenLoginModal,v=Object(n.useState)(!1),y=Object(s.a)(v,2),C=y[0],k=y[1],w=localStorage.getItem("token-".concat(F)),M=Object(n.useState)(0),P=Object(s.a)(M,2),z=P[0],A=P[1],I=localStorage.getItem("".concat(F,"-event"));Object(n.useEffect)((function(){A(l.like),I&&I!==l._id&&l._id&&localStorage.removeItem("".concat(F,"-event"))}),[l]);var E=function(){return function(e){for(var t,a=e.length;0!==a;){t=Math.floor(Math.random()*a),a--;var n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}return e.slice(0,6)}(null===p||void 0===p?void 0:p.filter((function(e){return e.image})))},L=function(e){return _.find((function(t){return t.slug===e}))},D=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)},V="data:".concat(null===(t=l.image)||void 0===t?void 0:t.contentType,";base64,"),T=D(null===(a=l.image)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.data);return Object(S.jsxs)(h.a,{className:"home",children:[i&&Object(S.jsxs)("div",{className:"home-addbutton",children:[l&&0===Object.keys(l).length&&Object(S.jsx)(x.a,{loading:C,disabled:C,color:"green",circular:!0,size:"medium",onClick:function(){return u(!0)},children:Object(S.jsx)(g.a,{icon:m.r,size:"2x"})}),l&&Object.keys(l).length>0&&Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(x.a,{loading:C,disabled:C,color:"red",circular:!0,size:"medium",onClick:function(){return e=l._id,void(w?(k(!0),o()({method:"delete",url:"".concat(N,"/api/events/deleteEvent"),data:{eventId:e},headers:{Authorization:"Bearer "+w}}).then((function(e){return d({})})).catch((function(e){return console.log(e)})).finally((function(){return k(!1)}))):O(!0));var e},children:Object(S.jsx)(g.a,{icon:m.x,size:"2x"})})})]}),l&&Object.keys(l).length>0&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{className:"home-header",as:"h1",children:l.name}),Object(S.jsxs)(h.a,{text:!0,className:"home-presentation",children:[l.image&&Object(S.jsx)("div",{children:Object(S.jsx)("img",{style:{width:"100%"},src:V+T,alt:l.name})}),l.date&&Object(S.jsx)("p",{children:"Le :\n                ".concat(new Date(l.date).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}))}),Object(S.jsx)("p",{children:l.description}),Object(S.jsxs)("div",{className:"home-like-button",children:[Object(S.jsx)(x.a,{disabled:!!I,icon:!0,circular:!0,color:"facebook",onClick:function(){I||(localStorage.setItem("".concat(F,"-event"),l._id),o()({method:"post",url:"".concat(N,"/api/events/updateLikes"),data:{_id:l._id}}),A(z+1))},children:Object(S.jsx)(g.a,{size:"1x",icon:m.w,style:{"--fa-secondary-color":"white","--fa-secondary-opacity":1}})}),Object(S.jsx)("span",{style:{background:"transparent",color:"white",borderRadius:50,display:"inline-block",padding:"5px 10px"},children:z})]})]})]}),l&&0===Object.keys(l).length&&Object(S.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:p&&((null===(r=E())||void 0===r?void 0:r.length)>0?Object(S.jsx)(q.Carousel,{showArrows:!0,showThumbs:!1,infiniteLoop:!0,children:E().map((function(e){var t,a,n;return Object(S.jsxs)("div",{children:[e.choice&&Object(S.jsx)(g.a,{className:"choisen alvp__icon",icon:m.m,style:{"--fa-primary-color":"darkred","--fa-secondary-color":"transparent"},size:"2x"}),Object(S.jsx)("img",{src:"data:".concat(null===e||void 0===e||null===(t=e.image)||void 0===t?void 0:t.contentType,";base64,")+D(null===(a=e.image)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.data),alt:e.name}),Object(S.jsxs)(U.a,{smooth:!0,to:"/categories/".concat(L(e.type).slug,"#").concat(e._id),onClick:function(){j(L(e.type)),b(e.category)},children:[Object(S.jsx)("p",{className:"legend",children:e.name}),Object(S.jsxs)("p",{className:"legend price",children:[e.price," ",Object(S.jsx)("small",{children:"\u20ac"})]})]})]})}))}):Object(S.jsx)("img",{height:"280px",src:"./assets/images/logo.png",alt:"logo RDR"}))})]})},J=a(28),G=a.n(J),H=a(48),W=a(268),Y=a(97),K=a(266),Q=a(84),X=a.n(Q),Z=function(e){var t=e.setEvent,a=e.setAppMessage,c=e.setOpenLoginModal,r=e.openAddEventModal,i=e.setOpenAddEventModal,l=Object(n.useState)({name:"",description:"",date:"",like:0,image:""}),d=Object(s.a)(l,2),u=d[0],j=d[1],b=new Date,p=Object(n.useState)(!1),O=Object(s.a)(p,2),m=O[0],g=O[1],h=function(e){var t={};t[e.target.name]=e.target.value,j(Object(M.a)(Object(M.a)({},u),t))},v=function(){var e=Object(H.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.a.imageFileResizer(t.target.files[0],500,500,"JPEG",100,0,(function(e){j(Object(M.a)(Object(M.a)({},u),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(n.useRef)(null),C=localStorage.getItem("token-".concat(F));return Object(S.jsxs)(W.a,{closeIcon:!0,onClose:function(){return i(!1)},onOpen:function(){return i(!0)},open:r,size:"small",children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{name:"add"}),"Ajouter un Evenement"]}),Object(S.jsx)(W.a.Content,{children:Object(S.jsxs)(K.a,{onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("name",u.name),n.append("description",u.description||""),n.append("date",u.date||""),n.append("like",0),n.append("image",u.image||""),C?(g(!0),o()({method:"post",url:"".concat(N,"/api/events/createEvent"),data:n,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&(t(e.data.data),j({name:"",description:"",date:"",like:0,image:""})),a({success:200===e.data.status,message:e.data.message})})).then((function(){i(!1)})).catch((function(e){return a({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){g(!1)}))):c(!0)},id:"addEvent-form",children:[Object(S.jsxs)(K.a.Field,{required:!0,error:!u.name,children:[Object(S.jsx)("label",{children:"Nom de l'evenement"}),Object(S.jsx)("input",{value:u.name,name:"name",type:"text",onChange:function(e){return h(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("textarea",{value:u.description,name:"description",rows:"5",cols:"33",onChange:function(e){return h(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Date de l'evenement"}),Object(S.jsx)("input",{value:u.date,name:"date",type:"date",min:b.toISOString().split("T")[0],onChange:function(e){return h(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("input",{ref:y,accept:"image/*",id:"addEventImage",files:u.image,type:"file",hidden:!0,onChange:function(e){return v(e)}}),Object(S.jsx)(x.a,{disabled:m,loading:m,type:"button",onClick:function(){return y.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(S.jsxs)(W.a.Actions,{children:[Object(S.jsxs)(x.a,{disabled:m||!u.name,loading:m,color:"green",type:"submit",form:"addEvent-form",inverted:!0,children:[Object(S.jsx)(Y.a,{name:"add"})," Ajouter"]}),Object(S.jsxs)(x.a,{disabled:m,loading:m,color:"red",type:"submit",form:"addEvent-form",inverted:!0,onClick:function(){return i(!1)},children:[Object(S.jsx)(Y.a,{name:"remove"})," Annuler"]})]})]})},$=a(263),ee=function(e){var t=e.selectedCategory,a=e.setAppMessage,c=e.openAddProductModal,r=e.setOpenAddProductModal,i=e.setOpenLoginModal,l=e.setProducts,d=Object(n.useState)({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:""}),u=Object(s.a)(d,2),j=u[0],b=u[1],p=Object(n.useState)(!1),O=Object(s.a)(p,2),m=O[0],g=O[1],h=Object(n.useRef)(null);Object(n.useEffect)((function(){b(Object(M.a)(Object(M.a)({},j),{},{type:t.slug}))}),[t]);var v=function(e){var t={};t[e.target.name]=e.target.value,b(Object(M.a)(Object(M.a)({},j),t))},y=function(){var e=Object(H.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.a.imageFileResizer(t.target.files[0],400,400,"JPEG",100,0,(function(e){b(Object(M.a)(Object(M.a)({},j),{},{image:e}))}),"file");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=localStorage.getItem("token-".concat(F));return Object(S.jsxs)(W.a,{onClose:function(){return r(!1)},onOpen:function(){return r(!0)},open:c,size:"small",children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{name:"add"}),"Ajouter un Produit"]}),Object(S.jsx)(W.a.Content,{children:Object(S.jsxs)(K.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("name",j.name),t.append("description",j.description||""),t.append("region",j.region||""),t.append("price",j.price),t.append("type",j.type),t.append("category",j.category||""),t.append("subCategory",j.subCategory||""),t.append("choice",j.choice||!1),t.append("visible",j.visible||!0),t.append("image",j.image||""),C?(g(!0),o()({method:"post",url:"".concat(N,"/api/products/createProduct"),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&(l(e.data.data),b({name:"",region:"",description:"",price:"",type:"",category:"",subCategory:"",choice:!1,visible:!0,image:""})),a({success:200===e.data.status,message:e.data.message})})).then((function(){r(!1)})).catch((function(e){return a({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){g(!1)}))):i(!0)},id:"addProduct-form",children:[Object(S.jsxs)(K.a.Field,{required:!0,error:!j.name,children:[Object(S.jsx)("label",{children:"Nom du Produit"}),Object(S.jsx)("input",{value:j.name,name:"name",type:"text",onChange:function(e){return v(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("textarea",{value:j.description,name:"description",rows:"5",cols:"33",onChange:function(e){return v(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"R\xe9gion"}),Object(S.jsx)("input",{value:j.region,name:"region",type:"text",onChange:function(e){return v(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,error:!j.price,children:[Object(S.jsx)("label",{children:"Prix"}),Object(S.jsx)("input",{min:1,step:.1,value:j.price,name:"price",type:"number",onChange:function(e){return v(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,error:!j.type,children:[Object(S.jsx)("label",{children:"Type de Produit"}),_.map((function(e){return e.slug&&Object(S.jsx)($.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.type;t=e,b(Object(M.a)(Object(M.a)({},j),{},{type:t}))}(e.slug)},checked:j.type===e.slug},e.slug)}))]}),("cave"===j.type||"spuntinu"===j.type||"epicerie"===j.type)&&Object(S.jsxs)(K.a.Field,{required:!0,error:!j.category,children:[Object(S.jsx)("label",{children:"Categorie de Produit"}),_.map((function(e){var t;return e.slug===j.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(S.jsx)($.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=j.category;t=e,b(Object(M.a)(Object(M.a)({},j),{},{category:t}))}(e.slug)},checked:j.category===e.slug},e.slug)})))}))]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Choix du Patron ?"}),Object(S.jsx)($.a,{toggle:!0,checked:j.choice,onChange:function(){return b(Object(M.a)(Object(M.a)({},j),{},{choice:!j.choice}))}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("input",{ref:h,accept:"image/*",id:"addImage",files:j.image,type:"file",hidden:!0,onChange:function(e){return y(e)}}),Object(S.jsx)(x.a,{disabled:m,loading:m,type:"button",onClick:function(){return h.current.click()},color:"orange",inverted:!0,children:"Ajouter une image"})]})]})}),Object(S.jsxs)(W.a.Actions,{children:[Object(S.jsxs)(x.a,{disabled:m||!j.name||!j.price||!j.type||("cave"===j.type||"spuntinu"===j.type||"epicerie"===j.type)&&!j.category,loading:m,color:"green",type:"submit",form:"addProduct-form",inverted:!0,children:[Object(S.jsx)(Y.a,{name:"add"})," Ajouter"]}),Object(S.jsxs)(x.a,{disabled:m,loading:m,color:"red",type:"submit",form:"addProduct-form",inverted:!0,onClick:function(){return r(!1)},children:[Object(S.jsx)(Y.a,{name:"remove"})," Annuler"]})]})]})},te=["image"],ae=function(e){var t=e.product,a=e.setOpenEditProductModal,c=e.openEditProductModal,r=e.setOpenLoginModal,i=e.setAppMessage,l=e.setProducts,d=(t.image,Object(v.a)(t,te)),u=Object(n.useState)({name:d.name,region:d.region,description:d.description,price:d.price,type:d.type,category:d.category,subCategory:d.subCategory,choice:d.choice,visible:d.visible}),j=Object(s.a)(u,2),b=j[0],p=j[1],O=Object(n.useState)(!1),m=Object(s.a)(O,2),g=m[0],h=m[1];Object(n.useEffect)((function(){p(Object(M.a)({},d))}),[t]);var y=function(e){var t={};t[e.target.name]=e.target.value,p(Object(M.a)(Object(M.a)({},b),t))},C=localStorage.getItem("token-".concat(F));Object(n.useEffect)((function(){"rouges"===b.category&&"blancs"===b.category||p(Object(M.a)(Object(M.a)({},b),{},{subCategory:""}))}),[b.category]);return Object(S.jsxs)(W.a,{onClose:function(){return a(!1)},onOpen:function(){return a(!0)},open:c,size:"small",children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{name:"edit"}),"Editer ",d.name]}),Object(S.jsx)(W.a.Content,{children:Object(S.jsxs)(K.a,{onSubmit:function(e){e.preventDefault(),C?(h(!0),o()({method:"post",url:"".concat(N,"/api/products/updateProduct"),data:{update:b,productId:d._id},headers:{Authorization:"Bearer "+C}}).then((function(e){e&&200===e.data.status&&l(e.data.data),i({success:200===e.data.status,message:e.data.message})})).catch((function(e){i({success:!1,message:"Il y a eu un probleme, veuillez reessayer"})})).finally((function(){h(!1),a(!1)}))):(a(!1),r(!0))},id:"editProduct-form",children:[Object(S.jsxs)(K.a.Field,{required:!0,error:!b.name,children:[Object(S.jsx)("label",{children:"Nom du Produit"}),Object(S.jsx)("input",{value:b.name,name:"name",type:"text",onChange:function(e){return y(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Description"}),Object(S.jsx)("textarea",{value:b.description,name:"description",rows:"5",cols:"33",onChange:function(e){return y(e)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"R\xe9gion"}),Object(S.jsx)("input",{value:b.region,name:"region",type:"text",onChange:function(e){return y(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,error:!b.price,children:[Object(S.jsx)("label",{children:"Prix"}),Object(S.jsx)("input",{min:1,step:.1,value:b.price,name:"price",type:"number",onChange:function(e){return y(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,error:!b.type,children:[Object(S.jsx)("label",{children:"Type de Produit"}),_.map((function(e){return e.slug&&Object(S.jsx)($.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=b.type;t=e,p(Object(M.a)(Object(M.a)({},b),{},{type:t}))}(e.slug)},checked:b.type===e.slug},e.slug)}))]}),("cave"===b.type||"spuntinu"===b.type||"epicerie"===t.type)&&Object(S.jsxs)(K.a.Field,{required:!0,error:!b.category,children:[Object(S.jsx)("label",{children:"Categorie de Produit"}),_.map((function(e){var t;return e.slug===b.type&&(null===(t=e.subCategories)||void 0===t?void 0:t.map((function(e){return Object(S.jsx)($.a,{style:{padding:5},label:e.name,name:e.slug,value:e.slug,onChange:function(){return function(e){var t=b.category;t=e,p(Object(M.a)(Object(M.a)({},b),{},{category:t}))}(e.slug)},checked:b.category===e.slug},e.slug)})))}))]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Choix du Patron ?"}),Object(S.jsx)($.a,{toggle:!0,checked:b.choice,onChange:function(){return p(Object(M.a)(Object(M.a)({},b),{},{choice:!b.choice}))}})]})]})}),Object(S.jsxs)(W.a.Actions,{children:[Object(S.jsxs)(x.a,{disabled:g||!b.name||!b.price||!b.type||("cave"===b.type||"spuntinu"===b.type||"epicerie"===t.type)&&!b.category,loading:g,color:"purple",type:"submit",form:"editProduct-form",inverted:!0,children:[Object(S.jsx)(Y.a,{name:"edit"})," Editer"]}),Object(S.jsxs)(x.a,{disabled:g,loading:g,color:"red",type:"submit",form:"editProduct-form",inverted:!0,onClick:function(){return a(!1)},children:[Object(S.jsx)(Y.a,{name:"remove"})," Annuler"]})]})]})},ne=function(e){var t,a=e.openImageModal,n=e.setOpenImageModal,c=e.product,r=c.image,s=c.name,i="data:".concat(null===r||void 0===r?void 0:r.contentType,";base64,"),o=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.data);return Object(S.jsxs)(W.a,{closeIcon:!0,basic:!0,open:a,onClose:function(){return n(!1)},children:[Object(S.jsx)(f.a,{children:s}),Object(S.jsx)(W.a.Content,{children:Object(S.jsx)("img",{style:{width:"100%"},src:i+o,alt:s})})]})},ce=function(e){var t=e.setOpenLoginModal,a=e.openLoginModal,c=e.setUser,r=e.setAppMessage,i=Object(n.useState)(""),l=Object(s.a)(i,2),d=l[0],u=l[1],j=Object(n.useState)(""),b=Object(s.a)(j,2),p=b[0],O=b[1],m=Object(n.useState)(!1),g=Object(s.a)(m,2),h=g[0],v=g[1];return Object(S.jsxs)(W.a,{onClose:function(){return t(!1)},onOpen:function(){return t(!0)},open:a,size:"small",children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{name:"user"}),"Se Connecter"]}),Object(S.jsx)(W.a.Content,{children:Object(S.jsxs)(K.a,{onSubmit:function(e){e.preventDefault(),v(!0),o()({method:"post",url:"".concat(N,"/auth/login"),data:{email:d,password:p}}).then((function(e){c(e.data.role),r({success:200===e.data.status,message:e.data.message}),localStorage.setItem("token-".concat(F),e.data.token),t(!1)})).catch((function(e){r({success:!1,message:"il y a eu un probl\xe9me durant la connexion"})})).finally((function(){v(!1)}))},id:"auth-form",children:[Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"E-Mail"}),Object(S.jsx)("input",{value:d,type:"email",onChange:function(e){return u(e.target.value)}})]}),Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("label",{children:"Mot de passe"}),Object(S.jsx)("input",{type:"password",value:p,onChange:function(e){return O(e.target.value)}})]})]})}),Object(S.jsx)(W.a.Actions,{children:Object(S.jsxs)(x.a,{color:"green",loading:h,type:"submit",form:"auth-form",disabled:0===d.length||0===p.length||h,inverted:!0,children:[Object(S.jsx)(Y.a,{name:"checkmark"})," Connexion"]})})]})},re=a(26),se=(a(243),function(e){var t=e.setOpenPaymentModal,a=e.openPaymentModal,c=e.setOrder,r=e.order,i=e.setCart,d=Object(l.useStripe)(),u=Object(l.useElements)(),j=Object(n.useState)({name:"",email:"",tel:"",date:"",items:[],status:"",transaction:{}}),b=Object(s.a)(j,2),p=b[0],m=b[1],g=Object(n.useState)(!1),h=Object(s.a)(g,2),v=h[0],y=h[1],k=Object(n.useState)(null),w=Object(s.a)(k,2),P=w[0],z=w[1],A=Object(n.useState)(!1),F=Object(s.a)(A,2),I=F[0],E=F[1],L=Object(n.useState)(!0),D=Object(s.a)(L,2),_=D[0],V=D[1],T=Object(n.useState)(""),R=Object(s.a)(T,2),q=R[0],U=R[1];Object(n.useEffect)((function(){(y(!0),a)&&(function(){var e=Object(H.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()({method:"post",url:"".concat(N,"/api/orders/create-payment-intent"),data:{items:r}});case 2:(t=e.sent)&&200===t.data.status?(U(t.data.clientSecret),y(!1),m(Object(M.a)(Object(M.a)({},p),{},{items:Object(O.a)(r)}))):z("Il y a eu un probl\xe9me veuillez recharger la page");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),z(null))}),[a]);var B=function(e){var t={};t[e.target.name]=e.target.value,m(Object(M.a)(Object(M.a)({},p),t))},J=function(){var e=Object(H.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t.empty),z(t.error?t.error.message:"");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(H.a)(G.a.mark((function e(t){var a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(!0),d&&u){e.next=5;break}return V(!0),e.abrupt("return");case 5:return e.next=7,d.confirmCardPayment(q,{receipt_email:p.email,payment_method:{card:u.getElement(l.CardElement),billing_details:{email:p.email,name:p.name,phone:p.tel}}});case 7:(a=e.sent).error?(z("Le paiement \xe0 \xe9chou\xe9 pour la raison suivante : ".concat(a.error.message)),y(!1)):(y(!0),p.status="ACCEPTED",p.transaction=a,m(Object(M.a)({},p)),function(){var e=Object(H.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o()({method:"post",url:"".concat(N,"/api/orders/createOrder"),data:p});case 2:(t=e.sent)&&200===t.data.status?(y(!1),c([]),m({}),i([])):z("Il y a eu un probl\xe9me veuillez recharger la page");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),z(null),y(!1),E(!0));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=new Date,Z=X.toISOString().split("T")[0],$=new Date(Z);return Object(S.jsxs)(W.a,{onClose:function(){return t(!1)},open:a,size:"small",children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{color:P?"red":I?"green":"blue",name:P?"remove circle":I?"check":"dollar sign"}),Object(S.jsx)("span",{style:{color:P?"red":I?"green":"blue"},children:P?"Paiement \xc9chou\xe9":I?"Paiement Reussi":v?"Paiement en Cours":"Payer Votre Commande"}),Object(S.jsxs)("div",{className:I?"result-message-container":"result-message-container hidden",children:[Object(S.jsxs)("p",{className:I?"result-message":"result-message hidden",children:["Votre r\xe9servation est effectu\xe9e, vous pourrez recuperer votre commande le"," ",Object(S.jsxs)("span",{className:"result-message-date",children:["samedi"!==X.toLocaleString("fr-FR",{weekday:"long"})?new Date($.setDate($.getDate()+1)).toISOString().split("T")[0]:new Date($.setDate($.getDate()+2)).toISOString().split("T")[0]," "]}),"\xe0 partir de"," ",Object(S.jsxs)("span",{className:"result-message-date",children:[" ","11h"]})]}),Object(S.jsx)("p",{className:I?"result-message":"result-message hidden",children:"chez Piuma au 42 Cours Napol\xe9on"})]})]}),!I&&Object(S.jsxs)(W.a.Content,{children:[Object(S.jsx)("div",{className:"cart-total",children:Object(S.jsxs)("span",{style:{color:"black"},children:["Total: ",C(r).toFixed(2)," ",Object(S.jsx)("small",{children:"\u20ac"})]})}),Object(S.jsxs)(K.a,{onSubmit:Q,id:"payment-form",loading:v,children:[Object(S.jsxs)(K.a.Field,{required:!0,children:[Object(S.jsx)("label",{children:"Nom sur votre carte"}),Object(S.jsx)("input",{value:p.name,name:"name",type:"text",onChange:function(e){return B(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,children:[Object(S.jsx)("label",{children:"Votre Email"}),Object(S.jsx)("input",{value:p.email,name:"email",type:"email",onChange:function(e){return B(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,children:[Object(S.jsx)("label",{children:"Votre Telephone"}),Object(S.jsx)("input",{value:p.tel,name:"tel",type:"tel",onChange:function(e){return B(e)}})]}),Object(S.jsxs)(K.a.Field,{required:!0,children:[Object(S.jsx)("label",{children:"Date de votre commande"}),Object(S.jsx)("span",{style:{color:"black"},children:"Attention, votre commande ne sera disponible que demain"}),Object(S.jsx)("input",{value:p.date,name:"date",type:"date",min:"samedi"!==X.toLocaleString("fr-FR",{weekday:"long"})?new Date($.setDate($.getDate())).toISOString().split("T")[0]:new Date($.setDate($.getDate()+1)).toISOString().split("T")[0],max:new Date($.setDate($.getDate())).toISOString().split("T")[0],onChange:function(e){return B(e)}})]}),Object(S.jsx)(l.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}},onChange:J})]})]}),Object(S.jsxs)(W.a.Actions,{children:[I?Object(S.jsx)(re.b,{to:"/categories/spuntinu",children:Object(S.jsx)(x.a,{style:{alignItems:"center"},type:"button",color:"green",size:"massive",onClick:function(){return t(!1)},children:"Retour \xe0 la boutique"})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(x.a,{form:"payment-form",type:"submit",color:"blue",size:"massive",disabled:v||_||I||!d||!p.name||!p.email||0===!p.items.length||!p.tel||!p.date,loading:v,children:"Payer"}),Object(S.jsx)(x.a,{type:"button",color:"orange",size:"massive",onClick:function(){return t(!1)},children:"Retour au Panier"})]}),P&&Object(S.jsx)("div",{className:"card-error",role:"alert",children:P})]})]})}),ie=function(e){var t,a=e.openUpdateImageModal,c=e.setOpenUpdateImageModal,r=e.product,i=e.setProducts,l=e.setOpenLoginModal,d=e.setAppMessage,u=Object(n.useState)(""),j=Object(s.a)(u,2),b=j[0],p=j[1],O=Object(n.useState)(!1),m=Object(s.a)(O,2),g=m[0],v=m[1],y=Object(n.useRef)(null),C=r._id,k=r.name,w=r.image;Object(n.useEffect)((function(){b&&function(e){var t=document.querySelector(".showimage"),a=new FileReader;t&&(a.onload=function(){t.src=a.result},a.readAsDataURL(e))}(b)}),[b]);var M=localStorage.getItem("token-".concat(F)),P="data:".concat(null===w||void 0===w?void 0:w.contentType,";base64,"),z=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(null===w||void 0===w||null===(t=w.data)||void 0===t?void 0:t.data);return Object(S.jsxs)(W.a,{open:a,onClose:function(){return c(!1)},children:[Object(S.jsxs)(f.a,{icon:!0,children:[Object(S.jsx)(Y.a,{name:"image"}),"Editer l'image"]}),(w||b)&&Object(S.jsx)(h.a,{children:Object(S.jsx)("img",{className:"showimage",style:{width:"100%",height:"100%"},src:P+z,alt:k})}),Object(S.jsx)(W.a.Content,{children:Object(S.jsx)(K.a,{onSubmit:function(e){e.preventDefault();var t=new FormData;t.append("image",b);var a=localStorage.getItem("token-".concat(F));a?(v(!0),o()({method:"post",url:"".concat(N,"/api/products/updateProductImage/").concat(C),data:t,headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+a}}).then((function(e){e&&200===e.data.status?(i(e.data.data),d({success:200===e.data.status,message:e.data.message})):d({success:200===e.data.status,message:e.data.message})})).then((function(){c(!1),p("")})).catch((function(e){return console.log(e)})).finally((function(){return v(!1)}))):(c(!1),l(!0))},id:"editImage-form",children:Object(S.jsxs)(K.a.Field,{children:[Object(S.jsx)("input",{ref:y,accept:"image/*",id:"addImage",files:b,type:"file",hidden:!0,onChange:function(e){X.a.imageFileResizer(e.target.files[0],400,400,"JPEG",100,0,(function(e){p(e)}),"file")}}),Object(S.jsx)(x.a,{disabled:g,loading:g,type:"button",onClick:function(){return y.current.click()},color:"orange",inverted:!0,children:"Modifier l'image"})]})})}),Object(S.jsxs)(W.a.Actions,{children:[b&&Object(S.jsxs)(x.a,{loading:g,disabled:g,color:"green",type:"submit",form:"editImage-form",inverted:!0,children:[Object(S.jsx)(Y.a,{name:"add"})," Envoyer l'image pour ",k]}),w&&Object(S.jsxs)(x.a,{loading:g,disabled:g,type:"button",color:"red",form:"editImage-form",inverted:!0,onClick:function(){M?(v(!0),o()({method:"post",url:"".concat(N,"/api/products/updateProduct"),data:{update:{image:""},productId:C},headers:{Authorization:"Bearer "+M}}).then((function(e){i(e.data.data),d({success:200===e.data.status,message:"Image supprim\xe9e avec succ\xe9s"})})).catch((function(e){return console.log(e)})).finally((function(){v(!1),c(!1)}))):(c(!1),l(!0))},children:[Object(S.jsx)(Y.a,{name:"delete"})," Supprimer l'image pour ",k]}),Object(S.jsxs)(x.a,{loading:g,disabled:g,color:"red",type:"submit",form:"editImage-form",inverted:!0,onClick:function(){return c(!1)},children:[Object(S.jsx)(Y.a,{name:"remove"})," Annuler"]})]})]})},oe=a(273),le=a(274),de=a(275),ue=(a(244),function(e){var t=e.selectedCategory,a=e.setActiveMenu,c=e.activeMenu,r=e.products,s=e.setFilteredProducts,i=e.setSelectedCategory,o=e.sidebarVisible,l=e.setSidebarVisible,d=e.children;return Object(n.useEffect)((function(){t&&(a(""),s([]),s(r.filter((function(e){return e.type===t.slug&&e.category===c})))),"cave"===t.slug||"spuntinu"===t.slug||"epicerie"===t.slug?t.subCategories.find((function(e){return e.slug===c}))?a(c):a(t.subCategories[0].slug):s(r.filter((function(e){return e.type===t.slug})))}),[t]),Object(S.jsx)(oe.a,{columns:1,children:Object(S.jsx)(oe.a.Column,{children:Object(S.jsxs)(le.a.Pushable,{as:de.a,children:[Object(S.jsxs)(le.a,{style:{background:"white"},as:E.a,animation:"overlay",icon:"labeled",onHide:function(){return l(!1)},onShow:function(){return l(!0)},vertical:!0,visible:o,width:"thin",children:[Object(S.jsx)(re.b,{to:"/",onClick:function(){return i({})},children:Object(S.jsx)(E.a.Item,{className:"categories-sidebar-item",children:Object(S.jsx)(E.a.Header,{children:Object(S.jsx)("img",{width:"100px",src:"./assets/images/logo.png",alt:"logo piuma"})})})}),Object(S.jsx)(p.a,{}),_.map((function(e){return Object(S.jsx)(re.b,{to:"/categories/".concat(e.slug),onClick:function(){i(e),l(!1)},children:Object(S.jsxs)(E.a.Item,{className:"categories-sidebar-item",children:[Object(S.jsx)(E.a.Header,{children:e.icon}),Object(S.jsx)("span",{children:e.name})]})},e.slug)}))]}),Object(S.jsx)(le.a.Pusher,{dimmed:o,children:Object(S.jsx)(de.a,{basic:!0,children:d})})]})})})}),je=a(146),be=(a(245),function(e){e.facebookUrl,e.instagramUrl,e.email,e.phoneNumber,e.backgroundColor,e.productBackgroundColor,e.textColor,e.titleColor;return Object(S.jsxs)("div",{className:"footer",children:[Object(S.jsx)("div",{children:Object(S.jsx)(f.a,{as:"h3",children:"Retrouvez nous sur : "})}),Object(S.jsxs)("div",{className:"footer__icons",children:[Object(S.jsx)("a",{target:"_blank",href:"fb://profile/104822281341917",rel:"noreferrer",children:Object(S.jsx)(g.a,{style:{color:"#3B5998",background:"white",borderRadius:"100%"},size:"3x",icon:je.a,pull:"left"})}),Object(S.jsx)("a",{target:"_blank",href:"https://www.instagram.com/a_piuma_/?hl=fr",rel:"noreferrer",children:Object(S.jsx)(g.a,{style:{color:"#3F729B",borderRadius:"100%"},size:"3x",icon:je.b,pull:"right"})})]}),Object(S.jsx)(p.a,{}),Object(S.jsx)("div",{children:Object(S.jsx)(f.a,{as:"h3",children:"Contactez nous ! "})}),Object(S.jsxs)("div",{className:"footer__icons",children:[Object(S.jsx)("a",{href:"mailto:cafe-rotisserie@piuma.corsica",children:Object(S.jsx)(g.a,{style:{"--fa-primary-color":"white","--fa-secondary-color":"black","--fa-secondary-opacity":.8},size:"3x",icon:m.g,pull:"left"})}),Object(S.jsx)("a",{href:"tel:06 23 47 66 66",children:Object(S.jsx)(g.a,{style:{"--fa-primary-color":"firebrick","--fa-secondary-color":"black","--fa-primary-opacity":1,"--fa-secondary-opacity":1},size:"3x",icon:m.p,pull:"right"})})]}),Object(S.jsx)(p.a,{}),Object(S.jsxs)("div",{className:"footer__copyright",style:{color:"black"},children:["Copyright \xa9 ",Object(S.jsx)("a",{style:{color:"black"},href:"https://piuma.corsica",children:Object(S.jsx)("span",{children:"Piuma \xa0"})}),Object(S.jsx)("span",{children:" ".concat((new Date).getFullYear(),". ")})]}),Object(S.jsx)("div",{className:"footer__alvp",children:Object(S.jsxs)("a",{style:{color:"black",fontSize:"1em"},href:"mailto:pef@alvp-developments.com",children:["Made with",Object(S.jsx)(g.a,{className:"alvp__icon",color:"darkred",icon:m.l,size:"2x"}),"by ALVP-Developments Ajaccio"]})})]})}),pe=(a(246),function(e){var t=e.setSelectedCategory,a=e.setSidebarVisible,c=e.setOpenLoginModal,r=e.user,i=e.loading,o=e.cart,l=(e.setCart,Object(n.useState)(!1)),d=Object(s.a)(l,2);d[0],d[1];return Object(S.jsxs)("div",{className:"topappbar",children:[Object(S.jsx)(re.b,{to:"/",onClick:function(){return t({})},children:Object(S.jsx)("div",{className:"topappbar-image",children:Object(S.jsx)("img",{width:"100px",src:"./assets/images/logo.png",alt:"logo piuma"})})}),Object(S.jsxs)("div",{className:"topappbar-icons",children:[Object(S.jsx)(x.a,{disabled:i,loading:i,icon:!0,circular:!0,color:r?"green":"grey",onClick:function(){return c(!0)},children:Object(S.jsx)(g.a,{size:"2x",icon:m.z})}),Object(S.jsx)(x.a,{disabled:i,loading:i,icon:!0,circular:!0,onClick:function(){return a(!0)},children:Object(S.jsx)(g.a,{size:"2x",icon:m.b})}),Object(S.jsx)(re.b,{to:"/panier",children:Object(S.jsx)(x.a,{disabled:i,loading:i,color:"orange",icon:!0,circular:!0,onClick:function(){return console.log("cart clicked")},children:Object(S.jsxs)("span",{style:{position:"relative"},className:"fa-layers fa-2x fa-fw",children:[Object(S.jsx)(g.a,{icon:m.v}),Object(S.jsx)("span",{style:{position:"absolute",top:"-23px",right:"-12px"},className:"fa-layers-top-right fa-layers-counter fa-2x",children:o.length})]})})})]}),0!==C(o)&&Object(S.jsxs)("span",{className:"cartamount",children:["Montant dans votre panier : ",C(o).toFixed(2),Object(S.jsx)("small",{children:"\u20ac"})]})]})}),Oe=(a(247),Object(d.a)("pk_test_eAyr9trbJArTYHJJgEePgULj00lTTB2TXk")),me=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),i=Object(s.a)(r,2),d=i[0],O=i[1],m=Object(n.useState)(""),g=Object(s.a)(m,2),h=g[0],f=g[1],x=Object(n.useState)(""),v=Object(s.a)(x,2),y=v[0],C=v[1],k=Object(n.useState)(""),M=Object(s.a)(k,2),P=M[0],z=M[1],A=Object(n.useState)(!1),F=Object(s.a)(A,2),I=F[0],E=F[1],L=Object(n.useState)(!1),D=Object(s.a)(L,2),_=D[0],V=D[1],T=Object(n.useState)(!1),q=Object(s.a)(T,2),U=q[0],J=q[1],G=Object(n.useState)(!1),H=Object(s.a)(G,2),W=H[0],Y=H[1],K=Object(n.useState)(!1),Q=Object(s.a)(K,2),X=Q[0],$=Q[1],te=Object(n.useState)(!1),re=Object(s.a)(te,2),oe=re[0],le=re[1],de=Object(n.useState)(!1),je=Object(s.a)(de,2),me=(je[0],je[1]),ge=Object(n.useState)({}),he=Object(s.a)(ge,2),fe=he[0],xe=he[1],ve=Object(n.useState)([]),ye=Object(s.a)(ve,2),Ce=ye[0],ke=ye[1],Se=Object(n.useState)({}),we=Object(s.a)(Se,2),Me=we[0],Pe=we[1],ze=Object(n.useState)(!1),Ae=Object(s.a)(ze,2),Ne=Ae[0],Fe=Ae[1],Ie=Object(n.useState)({}),Ee=Object(s.a)(Ie,2),Le=Ee[0],De=Ee[1],_e=Object(n.useState)([]),Ve=Object(s.a)(_e,2),Te=Ve[0],Re=Ve[1],qe=Object(n.useState)(!1),Ue=Object(s.a)(qe,2),Be=(Ue[0],Ue[1]),Je=Object(n.useState)([]),Ge=Object(s.a)(Je,2),He=Ge[0],We=Ge[1],Ye=Object(n.useState)([]),Ke=Object(s.a)(Ye,2),Qe=Ke[0],Xe=Ke[1],Ze=Object(n.useState)(!1),$e=Object(s.a)(Ze,2),et=$e[0],tt=$e[1];return Object(n.useEffect)((function(){0!==Object.keys(Me).length&&setTimeout((function(){Pe({})}),5e3)}),[Me]),Object(n.useEffect)((function(){Fe(!0),o.a.get("".concat(N,"/api/products/allProducts")).then((function(e){e&&ke(e.data.data)})).catch((function(e){return Pe({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return Fe(!1)})),Be(!0),o.a.get("".concat(N,"/api/events/getEvent")).then((function(e){e&&De(e.data.data)})).catch((function(e){Pe({success:!1,message:"Il y a eu un probl\xe9me, veuillez recharger la page"})})).finally((function(){return Be(!1)}))}),[]),Object(S.jsx)("div",{className:"App",style:{position:"relative"},children:Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(j.a,{animation:"jiggle",duration:500,visible:Object.keys(Me).length>0,children:Object(S.jsx)(b.a,{style:{position:"fixed",top:15,zIndex:"1000",width:"100%"},hidden:0===Object.keys(Me).length,success:!!Me.success,error:!Me.success,children:Me.message})}),Object(S.jsxs)(ue,{setActiveMenu:f,activeMenu:h,setDropdownValue:C,selectedCategory:d,setFilteredProducts:Re,products:Ce,sidebarVisible:a,setSidebarVisible:c,setSelectedCategory:O,children:[Object(S.jsx)(pe,{cart:Qe,setCart:Xe,setSelectedCategory:O,loading:Ne,user:P,setSidebarVisible:c,setOpenLoginModal:E}),Object(S.jsx)(p.a,{hidden:!0}),Object(S.jsx)(ce,{setUser:z,openLoginModal:I,setOpenLoginModal:E,setAppMessage:Pe}),Object(S.jsxs)(u.c,{children:[Object(S.jsxs)(u.a,{exact:!0,path:"/",children:[Object(S.jsx)(Z,{setEvent:De,setAppMessage:Pe,setOpenLoginModal:E,openAddEventModal:oe,setOpenAddEventModal:le}),Object(S.jsx)(B,{user:P,event:Le,products:Ce,setEvent:De,setSelectedCategory:O,setActiveMenu:f,setOpenLoginModal:E,setOpenAddEventModal:le,setOpenEditEventModal:me})]}),Object(S.jsxs)(u.a,{path:"/categories/:categorie",children:[Object(S.jsx)(ee,{setProducts:ke,selectedCategory:d,setOpenLoginModal:E,setAppMessage:Pe,openAddProductModal:_,setOpenAddProductModal:V}),Object(S.jsx)(ae,{product:fe,setOpenEditProductModal:J,setAppMessage:Pe,setOpenLoginModal:E,openEditProductModal:U,setProducts:ke}),Object(S.jsx)(ie,{openUpdateImageModal:X,setOpenUpdateImageModal:$,setProducts:ke,product:fe,setOpenLoginModal:E,setAppMessage:Pe}),Object(S.jsx)(ne,{openImageModal:W,setOpenImageModal:Y,product:fe}),Object(S.jsx)(R,{filteredProducts:Te,setFilteredProducts:Re,user:P,setCart:Xe,cart:Qe,selectedCategory:d,activeMenu:h,setActiveMenu:f,dropdownValue:y,setDropdownValue:C,products:Ce,setProducts:ke,setOpenLoginModal:E,setOpenAddProductModal:V,setOpenImageModal:Y,setOpenUpdateImageModal:$,setOpenEditProductModal:J,setSelectedProduct:xe})]}),Object(S.jsxs)(u.a,{path:"/panier",children:[Object(S.jsx)(w,{setOpenPaymentModal:tt,cart:Qe,setCart:Xe,order:He,setOrder:We}),Object(S.jsx)(l.Elements,{stripe:Oe,children:Object(S.jsx)(se,{setOpenPaymentModal:tt,openPaymentModal:et,setOrder:We,setCart:Xe,cart:Qe,order:He})})]})]}),Object(S.jsx)(p.a,{}),Object(S.jsx)(be,{})]})]})})},ge=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,277)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};a(248);r.a.render(Object(S.jsx)(re.a,{basename:"/",children:Object(S.jsx)(me,{})}),document.getElementById("root")),ge()}},[[249,1,2]]]);
//# sourceMappingURL=main.6f351b3b.chunk.js.map